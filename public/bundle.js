
/**
 * feathers-catberry: 0.0.0
 * Build Date: Fri Aug 12 2016 09:27:59 GMT+0700 (ICT)
 */

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}var e=[{name:"Main",constructor:require("./catberry_stores/Main.js")}],f=[{name:"document",constructor:require("./catberry_components/document/Document.js"),properties:{name:"document",template:"./document.hbs",logic:"./Document.js"},templateSource:'{"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {\n    return "<!DOCTYPE html>\\n<html>\\n<head></head>\\n<body>\\n\t<cat-hello-world id=\\"unique\\" cat-store=\\"Main\\"></cat-hello-world>\\n</body>\\n</html>\\n\\n";\n},"useData":true}',errorTemplateSource:null},{name:"head",constructor:require("./catberry_components/head/Head.js"),properties:{name:"head",template:"./head.hbs",logic:"./Head.js"},templateSource:'{"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return "<meta charset=\\"UTF-8\\">\\n<title>"\n    + container.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"title","hash":{},"data":data}) : helper)))\n    + "</title>\\n<script src=\\"bundle.js\\"></script>\\n\\n\\n";\n},"useData":true}',errorTemplateSource:null},{name:"hello-world",constructor:require("./catberry_components/hello-world/HelloWorld.js"),properties:{name:"hello-world",template:"./hello.hbs",errorTemplate:"./error.hbs",logic:"./HelloWorld.js"},templateSource:'{"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return "<h1>Hello, "\n    + container.escapeExpression(((helper = (helper = helpers.who || (depth0 != null ? depth0.who : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"who","hash":{},"data":data}) : helper)))\n    + "!</h1>\\n\\n";\n},"useData":true}',errorTemplateSource:'{"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {\n    return "Oops!\\n\\n";\n},"useData":true}'}],g=require("./routes.js")||[],h=[{expression:"/",pathParameters:[],queryParameters:[],pathRegExpSource:"^/$"}]||[],i=require("./node_modules/catberry/browser/Catberry.js"),j=require("./node_modules/catberry/lib/base/BootstrapperBase.js"),k=require("./node_modules/catberry/lib/StoreDispatcher"),l=require("./node_modules/catberry/browser/providers/ModuleApiProvider"),m=require("./node_modules/catberry/browser/CookieWrapper"),n=function(a){function j(){return b(this,j),c(this,a.call(this,i))}return d(j,a),j.prototype.configure=function(b,c){a.prototype.configure.call(this,b,c),c.register("storeDispatcher",k,!0),c.register("moduleApiProvider",l,!0),c.register("cookieWrapper",m,!0),c.registerInstance("window",window),g.forEach(function(a){return c.registerInstance("routeDefinition",a)}),h.forEach(function(a){return c.registerInstance("routeDescriptor",a)}),e.forEach(function(a){return c.registerInstance("store",a)}),f.forEach(function(a){return c.registerInstance("component",a)})},j}(j);module.exports=new n;
},{"./catberry_components/document/Document.js":3,"./catberry_components/head/Head.js":4,"./catberry_components/hello-world/HelloWorld.js":5,"./catberry_stores/Main.js":6,"./node_modules/catberry/browser/Catberry.js":27,"./node_modules/catberry/browser/CookieWrapper":28,"./node_modules/catberry/browser/providers/ModuleApiProvider":34,"./node_modules/catberry/lib/StoreDispatcher":39,"./node_modules/catberry/lib/base/BootstrapperBase.js":40,"./routes.js":84}],2:[function(require,module,exports){
"use strict";var a=require("./config/environment.json"),b=require("catberry"),c=b.create(a),d=require("catberry-handlebars");d.register(c.locator);var e=require("catberry-logger");e.register(c.locator);var f=require("catberry-uhr");f.register(c.locator),c.startWhenReady();
},{"./config/environment.json":7,"catberry":36,"catberry-handlebars":13,"catberry-logger":16,"catberry-uhr":19}],3:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function b(){a(this,b)};module.exports=b;
},{}],4:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function(){function b(c){a(this,b),this._config=c.resolve("config")}return b.prototype.render=function(){return this._config},b}();module.exports=b;
},{}],5:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function(){function b(){a(this,b)}return b.prototype.render=function(){return this.$context.getStoreData()},b}();module.exports=b;
},{}],6:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function(){function b(){a(this,b)}return b.prototype.load=function(){return{who:"World"}},b}();module.exports=b;
},{}],7:[function(require,module,exports){
module.exports={
	"title": "Catberry Project",
	"logger": {
		"level": 0
	}
}

},{}],8:[function(require,module,exports){
"use strict";function a(){if(f.length)throw f.shift()}function b(a){var b;b=e.length?e.pop():new c,b.task=a,d(b)}function c(){this.task=null}var d=require("./raw"),e=[],f=[],g=d.makeRequestCallFromTimer(a);module.exports=b,c.prototype.call=function(){try{this.task.call()}catch(a){b.onerror?b.onerror(a):(f.push(a),g())}finally{this.task=null,e[e.length]=this}};
},{"./raw":9}],9:[function(require,module,exports){
(function (global){
"use strict";function a(a){e.length||(g(),f=!0),e[e.length]=a}function b(){for(;h<e.length;){var a=h;if(h+=1,e[a].call(),h>i){for(var b=0,c=e.length-h;b<c;b++)e[b]=e[b+h];e.length-=h,h=0}}e.length=0,h=0,f=!1}function c(a){var b=1,c=new j(a),d=document.createTextNode("");return c.observe(d,{characterData:!0}),function(){b=-b,d.data=b}}function d(a){return function(){function b(){clearTimeout(c),clearInterval(d),a()}var c=setTimeout(b,0),d=setInterval(b,50)}}module.exports=a;var e=[],f=!1,g,h=0,i=1024,j=global.MutationObserver||global.WebKitMutationObserver;g="function"==typeof j?c(b):d(b),a.requestFlush=g,a.makeRequestCallFromTimer=d;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],10:[function(require,module,exports){
(function (process,global){
"use strict";function a(a){var d=.001*c.call(b),e=Math.floor(d),f=Math.floor(d%1*1e9);return a&&(e-=a[0],f-=a[1],f<0&&(e--,f+=1e9)),[e,f]}module.exports=process.hrtime||a;var b=global.performance||{},c=b.now||b.mozNow||b.msNow||b.oNow||b.webkitNow||function(){return(new Date).getTime()};
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":73}],11:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function(){function b(c){a(this,b),this._handlebars=c.resolve("handlebars"),this._templates=Object.create(null)}return b.prototype.registerCompiled=function(a,b){var c=new Function("return "+b+";");this._templates[a]=this._handlebars.template(c())},b.prototype.render=function(a,b){if(!(a in this._templates))return Promise.reject(new Error('"'+a+'" not found among registered templates'));var c;try{c=Promise.resolve(this._templates[a](b))}catch(a){c=Promise.reject(a)}return c},b}();module.exports=b;
},{}],12:[function(require,module,exports){
"use strict";module.exports=require("handlebars/runtime");
},{"handlebars/runtime":70}],13:[function(require,module,exports){
"use strict";var a=require("./lib/handlebars"),b=require("./lib/TemplateProvider");module.exports={register:function(c){c.registerInstance("handlebars",a),c.register("templateProvider",b,!0)},handlebars:a,TemplateProvider:b};
},{"./lib/TemplateProvider":11,"./lib/handlebars":12}],14:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function(){function b(){a(this,b),this._registrations=Object.create(null)}return b.prototype.register=function(a,b,c){this._throwIfNotFunction(a,b),this._throwIfNotString(a),this._initializeRegistration(a),this._registrations[a].unshift({Implementation:b,isSingleton:Boolean(c),singleInstance:null})},b.prototype.registerInstance=function(a,b){this._throwIfNotString(a),this._initializeRegistration(a,this),this._registrations[a].unshift({Implementation:b.constructor,isSingleton:!0,singleInstance:b})},b.prototype.resolve=function(a){this._throwIfNotString(a),this._throwIfNoType(a);var b=this._registrations[a][0];return this._createInstance(b)},b.prototype.resolveAll=function(a){var b=this;return this._throwIfNotString(a),this._throwIfNoType(a),this._registrations[a].map(function(a){return b._createInstance(a)})},b.prototype.unregister=function(a){this._throwIfNotString(a),this._registrations[a]=[]},b.prototype._createInstance=function(a){if(a.isSingleton&&null!==a.singleInstance)return a.singleInstance;var b=new a.Implementation(this);return a.isSingleton&&(a.singleInstance=b),b},b.prototype._initializeRegistration=function(a){a in this._registrations||(this._registrations[a]=[])},b.prototype._throwIfNoType=function(a){if(!(a in this._registrations&&this._registrations[a].length>0))throw new Error('Type "'+a+'" not registered')},b.prototype._throwIfNotFunction=function(a,b){if(!(b instanceof Function))throw new Error("Constructor for type "+a+" should be a function")},b.prototype._throwIfNotString=function(a){if("string"!=typeof a)throw new Error('Type name "'+a+'" should be a string')},b}();module.exports=b;
},{}],15:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}var e=require("../lib/LoggerBase"),f=function(a){function e(){return b(this,e),c(this,a.apply(this,arguments))}return d(e,a),e.prototype.write=function(a,b){if(!(a<this._level))if(a>=50){var c=b instanceof Error?b.name+": "+b.message+"\n"+b.stack:b;console.error(c)}else a>=40?console.warn(b):a>=30?console.info(b):console.log(b)},e.prototype.wrapEventBus=function(b){var c=this;a.prototype.wrapEventBus.call(this,b);var d=this._locator.resolve("window");d.onerror=function(a,b,d){return c.fatal(b+":"+d+" "+a),!0},this._level>20||b.on("documentUpdated",function(a){return c.debug("Document updated ("+a.length+" store(s) changed)")}).on("componentBound",function(a){var b=a.id?"#"+a.id:"";c.debug('Component "'+a.element.tagName+b+'" is bound')}).on("componentUnbound",function(a){var b=a.id?"#"+a.id:"";c.debug('Component "'+a.element.tagName+b+'" is unbound')})},e}(e);module.exports=f;
},{"../lib/LoggerBase":17}],16:[function(require,module,exports){
"use strict";var a=require("./lib/Logger");module.exports={register:function(b){var c=new a(b);b.registerInstance("logger",c)},Logger:a};
},{"./lib/Logger":15}],17:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a){var b=a.attributes.id;return b?"#"+b:""}function c(a){if("string"!=typeof a)return"";var b=a.toUpperCase();return"HEAD"===a?b:"DOCUMENT"===a?"HTML":"CAT-"+b}var d=30,e="catberry",f=require("pretty-hrtime"),g=function(){function g(b){a(this,g);var c=b.resolve("config").logger||{};this._locator=b,this._level="number"==typeof c.level?c.level:d,this._name="string"==typeof c.name?c.name:e;var f=b.resolve("eventBus");this.wrapEventBus(f)}return g.prototype.trace=function(a){this.write(10,a)},g.prototype.debug=function(a){this.write(20,a)},g.prototype.info=function(a){this.write(30,a)},g.prototype.warn=function(a){this.write(40,a)},g.prototype.error=function(a){this.write(50,a)},g.prototype.fatal=function(a){this.write(60,a)},g.prototype.wrapEventBus=function(a){var d=this;this._level>50||(a.on("error",function(a){return d.error(a)}),this._level>40||(a.on("warn",function(a){return d.warn(a)}),this._level>30||(a.on("info",function(a){return d.info(a)}).on("componentLoaded",function(a){return d.info('Component "'+a.name+'" loaded')}).on("storeLoaded",function(a){return d.info('Store "'+a.name+'" loaded')}).on("allStoresLoaded",function(){return d.info("All stores loaded")}).on("allComponentsLoaded",function(){return d.info("All components loaded")}),this._level>20||(a.on("debug",function(a){return d.debug(a)}).on("componentRender",function(a){var e=b(a.context),f=c(a.name);d.debug('Component "'+f+e+'" is being rendered...')}).on("componentRendered",function(a){var e=b(a.context),g=c(a.name),h=Array.isArray(a.hrTime)?" ("+f(a.hrTime)+")":"";d.debug('Component "'+g+e+'" rendered'+h)}).on("documentRendered",function(a){return d.debug("Document rendered for URI "+a.location.toString())}),this._level>10||a.on("trace",function(a){return d.trace(a)})))))},g}();module.exports=g;
},{"pretty-hrtime":72}],18:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}var e=require("../lib/UHRBase"),f={cookie:!0,"accept-charset":!0},g=function(a){function e(d){b(this,e);var f=c(this,a.call(this));return f.window=d.resolve("window"),f}return d(e,a),e.prototype._doRequest=function(a){var b=this;return Object.keys(a.headers).forEach(function(b){f.hasOwnProperty(b.toLowerCase())&&delete a.headers[b]}),new Promise(function(c,d){var e=new b.window.XMLHttpRequest,f=null;e.onabort=function(){f=new Error("Request aborted"),d(f)},e.ontimeout=function(){f=new Error("Request timeout"),d(f)},e.onerror=function(){f=new Error(e.statusText||"Connection error"),d(f)},e.onreadystatechange=function(){if(4===e.readyState&&!f){var a=b._getStatusObject(e),d=b.convertResponse(a.headers,e.responseText);c({status:a,content:d})}};var g=a.uri.authority.userInfo?a.uri.authority.userInfo.user:null,h=a.uri.authority.userInfo?a.uri.authority.userInfo.password:null;e.open(a.method,a.uri.toString(),!0,g||void 0,h||void 0),e.timeout=a.timeout,a.withCredentials&&(e.withCredentials=!0),Object.keys(a.headers).forEach(function(b){return e.setRequestHeader(b,a.headers[b])}),e.send(a.data)})},e.prototype._getStatusObject=function(a){var b={};return a?(a.getAllResponseHeaders().split("\n").forEach(function(a){var c=a.indexOf(":");if(!(c<=0)){var d=a.substring(0,c).trim().toLowerCase();b[d]=a.substring(c+1).trim()}}),{code:1223===a.status?204:a.status,text:1223===a.status?"No Content":a.statusText,headers:b}):{code:0,text:"",headers:b}},e}(e);module.exports=g;
},{"../lib/UHRBase":20}],19:[function(require,module,exports){
"use strict";var a=require("./lib/UHR");module.exports={register:function(b){b.register("uhr",a,!0)},UHR:a};
},{"./lib/UHR":18}],20:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},c=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),d=require("catberry-uri"),e=d.Query,f=d.URI,g=3e4,h=/^(http)s?$/i,i=function(){function d(){a(this,d)}return d.prototype.get=function(a,b){return this.request(this._normalizeOptions(d.METHODS.GET,a,b))},d.prototype.post=function(a,b){return this.request(this._normalizeOptions(d.METHODS.POST,a,b))},d.prototype.put=function(a,b){return this.request(this._normalizeOptions(d.METHODS.PUT,a,b))},d.prototype.patch=function(a,b){return this.request(this._normalizeOptions(d.METHODS.PATCH,a,b))},d.prototype.delete=function(a,b){return this.request(this._normalizeOptions(d.METHODS.DELETE,a,b))},d.prototype.request=function(a){var b=this;return this._validateRequest(a).then(function(a){return b._doRequest(a)})},d.prototype._validateRequest=function(a){if(!a||"object"!==("undefined"==typeof a?"undefined":b(a)))return Promise.reject(new Error("Request parameters argument should be an object"));var c=Object.create(a);if("string"!=typeof a.url)return Promise.reject(new Error('"parameters.url" is a required parameter'));if(c.uri=new f(c.url),!c.uri.scheme)return Promise.reject(new Error('"parameters.url" should contain a protocol (scheme)'));if(!h.test(c.uri.scheme))return Promise.reject(new Error('"'+c.uri.scheme+'" protocol (scheme) is unsupported'));if(!c.uri.authority||!c.uri.authority.host)return Promise.reject(new Error('"parameters.url" should contain a host'));if("string"!=typeof c.method||!(c.method in d.METHODS))return Promise.reject(new Error("HTTP method is a required parameter"));if(c.timeout=c.timeout||g,"number"!=typeof c.timeout)return Promise.reject(new Error("Timeout should be a number"));if(c.headers=this.createHeaders(c.headers),!this._isUpstreamRequest(a.method)&&c.data&&"object"===b(c.data)){var i=Object.keys(c.data);i.length>0&&!c.uri.query&&(c.uri.query=new e("")),i.forEach(function(a){c.uri.query.values[a]=c.data[a]}),c.data=null}else{var j=this._getDataToSend(c.headers,c.data);c.headers=j.headers,c.data=j.data}return Promise.resolve(c)},d.prototype._getDataToSend=function(a,c){var f=this._findContentType(a),g=f.name,h=f.type;if(!c||"object"!==("undefined"==typeof c?"undefined":b(c)))return c=c?String(c):"",h||(a[g]=d.PLAIN_TEXT_ENTITY_CONTENT_TYPE),{headers:a,data:c};if(h===d.TYPES.JSON)return{headers:a,data:JSON.stringify(c)};a[g]=d.URL_ENCODED_ENTITY_CONTENT_TYPE;var i=new e;return i.values=c,{headers:a,data:i.toString().replace(/\+/g,"%2B").replace(/%20/g,"+")}},d.prototype.createHeaders=function(a){a&&"object"===("undefined"==typeof a?"undefined":b(a))||(a={});var c={};return Object.keys(d.DEFAULT_GENERAL_HEADERS).forEach(function(a){c[a]=d.DEFAULT_GENERAL_HEADERS[a]}),Object.keys(a).forEach(function(b){return null===a[b]||void 0===a[b]?void delete c[b]:void(c[b]=a[b])}),c},d.prototype._doRequest=function(a){},d.prototype.convertResponse=function(a,b){"string"!=typeof b&&(b="");var c=this._findContentType(a),f=c.type||d.TYPES.PLAIN_TEXT;switch(f){case d.TYPES.JSON:try{return JSON.parse(b)||{}}catch(a){return{}}case d.TYPES.URL_ENCODED:try{var g=new e(b.replace("+","%20"));return g.values||{}}catch(a){return{}}default:return b}},d.prototype._isUpstreamRequest=function(a){return a===d.METHODS.POST||a===d.METHODS.PUT||a===d.METHODS.PATCH},d.prototype._normalizeOptions=function(a,b,c){c=c||{};var d=Object.create(c);return d.method=a,d.url=b,d},d.prototype._findContentType=function(a){var b="",c="Content-Type";Object.keys(a).forEach(function(d){"content-type"===d.toLowerCase()&&(c=d,b=a[d])});var d=b.split(";"),e=d[0].toLowerCase();return{name:c,type:e}},c(d,null,[{key:"METHODS",get:function(){return{GET:"GET",HEAD:"HEAD",POST:"POST",PUT:"PUT",PATCH:"PATCH",DELETE:"DELETE",OPTIONS:"OPTIONS",TRACE:"TRACE",CONNECT:"CONNECT"}}},{key:"TYPES",get:function(){return{URL_ENCODED:"application/x-www-form-urlencoded",JSON:"application/json",PLAIN_TEXT:"text/plain",HTML:"text/html"}}},{key:"CHARSET",get:function(){return"UTF-8"}},{key:"DEFAULT_GENERAL_HEADERS",get:function(){return{Accept:d.TYPES.JSON+"; q=0.7, "+d.TYPES.HTML+"; q=0.2, "+d.TYPES.PLAIN_TEXT+"; q=0.1","Accept-Charset":d.CHARSET+"; q=1"}}},{key:"CHARSET_PARAMETER",get:function(){return"; charset="+d.CHARSET}},{key:"URL_ENCODED_ENTITY_CONTENT_TYPE",get:function(){return d.TYPES.URL_ENCODED+d.CHARSET_PARAMETER}},{key:"JSON_ENTITY_CONTENT_TYPE",get:function(){return d.TYPES.JSON+d.CHARSET_PARAMETER}},{key:"PLAIN_TEXT_ENTITY_CONTENT_TYPE",get:function(){return d.TYPES.PLAIN_TEXT+d.CHARSET_PARAMETER}}]),d}();module.exports=i;
},{"catberry-uri":21}],21:[function(require,module,exports){
"use strict";module.exports={URI:require("./lib/URI"),Authority:require("./lib/Authority"),UserInfo:require("./lib/UserInfo"),Query:require("./lib/Query")};
},{"./lib/Authority":22,"./lib/Query":23,"./lib/URI":24,"./lib/UserInfo":25}],22:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=require("./UserInfo"),c=require("./percentEncodingHelper"),d=/^\d+$/,e="URI authority port must satisfy expression "+d.toString(),f=function(){function f(e){if(a(this,f),this.userInfo=null,this.port=null,this.host=null,"string"==typeof e&&e.length>0){var g=e.indexOf("@");if(g!==-1){var h=e.substring(0,g);this.userInfo=new b(h),e=e.substring(g+1)}var i=e.lastIndexOf(":");if(i!==-1){var j=e.substring(i+1);i===e.length-1?(this.port="",e=e.substring(0,i)):d.test(j)&&(this.port=j,e=e.substring(0,i))}this.host=c.decode(e)}}return f.createUserInfo=function(a){return new b(a)},f.prototype.createUserInfo=function(a){return f.createUserInfo(a)},f.prototype.clone=function(){var a=new f;return this.userInfo&&(a.userInfo=this.userInfo.clone()),"string"==typeof this.host&&(a.host=this.host),"string"==typeof this.port&&(a.port=this.port),a},f.prototype.toString=function(){var a="";if(this.userInfo instanceof b&&(a+=this.userInfo.toString()+"@"),void 0!==this.host&&null!==this.host){var f=String(this.host);a+=c.encodeHost(f)}if(void 0!==this.port&&null!==this.port){var g=String(this.port);if(g.length>0&&!d.test(g))throw new Error(e);a+=":"+g}return a},f}();module.exports=f;
},{"./UserInfo":25,"./percentEncodingHelper":26}],23:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=require("./percentEncodingHelper"),c=function(){function c(d){var e=this;a(this,c),this.values=null,"string"==typeof d&&(this.values={},d.split("&").forEach(function(a){var c=a.split("="),d=b.decode(c[0]);if(d){d in e.values&&!(e.values[d]instanceof Array)&&(e.values[d]=[e.values[d]]);var f="string"==typeof c[1]?b.decode(c[1]):null;e.values[d]instanceof Array?e.values[d].push(f):e.values[d]=f}},this))}return c.prototype.clone=function(){var a=this,b=new c;return this.values&&(b.values={},Object.keys(this.values).forEach(function(c){b.values[c]=a.values[c]},this)),b},c.prototype.toString=function(){var a=this;if(!this.values)return"";var c="";return Object.keys(this.values).forEach(function(d){var e=a.values[d]instanceof Array?a.values[d]:[a.values[d]];e.forEach(function(a){c+="&"+b.encodeQuerySubComponent(d),void 0!==a&&null!==a&&(a=String(a),c+="="+b.encodeQuerySubComponent(a))})},this),c.replace(/^&/,"")},c}();module.exports=c;
},{"./percentEncodingHelper":26}],24:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a,b){var e=new k("");return b.scheme?(e.scheme=b.scheme,e.authority=b.authority?b.authority.clone():b.authority,e.path=d(b.path),e.query=b.query?b.query.clone():b.query):(b.authority?(e.authority=b.authority?b.authority.clone():b.authority,e.path=d(b.path),e.query=b.query?b.query.clone():b.query):(""===b.path?(e.path=a.path,b.query?e.query=b.query.clone():e.query=a.query?a.query.clone():a.query):("/"===b.path[0]?e.path=d(b.path):(e.path=c(a,b),e.path=d(e.path)),e.query=b.query?b.query.clone():b.query),e.authority=a.authority?a.authority.clone():a.authority),e.scheme=a.scheme),e.fragment=b.fragment,e}function c(a,b){if(a.authority&&""===a.path)return"/"+b.path;var c=a.path.indexOf("/")!==-1?a.path.replace(/\/[^\/]+$/,"/"):"";return c+b.path}function d(a){if(!a)return"";for(var b=a,c="",d="",e="";0!==b.length;)if(c=b.replace(/^\.?\.\//,""),c===b)if(c=b.replace(/^((\/\.\/)|(\/\.$))/,"/"),c===b)if(c=b.replace(/^((\/\.\.\/)|(\/\.\.$))/,"/"),c===b){if("."===b||".."===b)break;d=/^\/?[^\/]*(\/|$)/.exec(b)[0],d=d.replace(/([^\/])(\/$)/,"$1"),b=b.substring(d.length),e+=d}else e=e.replace(/\/[^\/]+$/,""),b=c;else b=c;else b=c;return e}var e=require("./percentEncodingHelper"),f=require("./Authority"),g=require("./Query"),h=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),i=/^[a-z]+[a-z\d\+\.-]*$/i,j="URI scheme must satisfy expression "+i.toString(),k=function(){function c(b){a(this,c),this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,"string"!=typeof b&&(b="");var d=b.match(h);d&&("string"==typeof d[2]&&(this.scheme=e.decode(d[2])),"string"==typeof d[4]&&(this.authority=c.createAuthority(d[4])),"string"==typeof d[5]&&(this.path=e.decodePath(d[5])),"string"==typeof d[7]&&(this.query=c.createQuery(d[7])),"string"==typeof d[9]&&(this.fragment=e.decode(d[9])))}return c.createAuthority=function(a){return new f(a)},c.prototype.createAuthority=function(a){return c.createAuthority(a)},c.createUserInfo=function(a){return f.createUserInfo(a)},c.prototype.createUserInfo=function(a){return c.createUserInfo(a)},c.createQuery=function(a){return new g(a)},c.prototype.createQuery=function(a){return c.createQuery(a)},c.prototype.resolveRelative=function(a){if(!a.scheme)throw new Error("Scheme component is required to be present in a base URI");return b(a,this)},c.prototype.clone=function(){var a=new c;return"string"==typeof this.scheme&&(a.scheme=this.scheme),this.authority&&(a.authority=this.authority.clone()),"string"==typeof this.path&&(a.path=this.path),this.query&&(a.query=this.query.clone()),"string"==typeof this.fragment&&(a.fragment=this.fragment),a},c.prototype.toString=function(){var a="";if(void 0!==this.scheme&&null!==this.scheme){var b=String(this.scheme);if(!i.test(b))throw new Error(j);a+=b+":"}this.authority instanceof f&&(a+="//"+this.authority.toString());var c=void 0===this.path||null===this.path?"":String(this.path);if(a+=e.encodePath(c),this.query instanceof g&&(a+="?"+this.query.toString()),void 0!==this.fragment&&null!==this.fragment){var d=String(this.fragment);a+="#"+e.encodeFragment(d)}return a},c}();module.exports=k;
},{"./Authority":22,"./Query":23,"./percentEncodingHelper":26}],25:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=require("./percentEncodingHelper"),c=function(){function c(d){if(a(this,c),this.user=null,this.password=null,"string"==typeof d&&d.length>0){var e=d.split(":");"string"==typeof e[0]&&(this.user=b.decode(e[0])),"string"==typeof e[1]&&(this.password=b.decode(e[1]))}}return c.prototype.clone=function(){var a=new c;return"string"==typeof this.user&&(a.user=this.user),"string"==typeof this.password&&(a.password=this.password),a},c.prototype.toString=function(){var a="";if(void 0!==this.user&&null!==this.user){var c=String(this.user);a+=b.encodeUserInfoSubComponent(c)}if(void 0!==this.password&&null!==this.password){var d=String(this.password);a+=":"+b.encodeUserInfoSubComponent(d)}return a},c}();module.exports=c;
},{"./percentEncodingHelper":26}],26:[function(require,module,exports){
"use strict";module.exports={encodeUserInfoSubComponent:function(a){return a.replace(/[^\w\.~\-!\$&'\(\)\*\+,;=\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)},encodeHost:function(a){return a.replace(/[^\w\.~\-!\$&'\(\)\*\+,;=:\[\]\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)},encodePath:function(a){return a.split(/%2f/i).map(function(a){return a.replace(/[^\w\.~\-!\$&'\(\)\*\+,;=:@\/\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)}).reduce(function(a,b){return a?b?a+"%2F"+b:a:b},"")},encodeQuerySubComponent:function(a){return a.replace(/[^\w\.~\-!\$'\(\)\*\+,;:@\/\?\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)},encodeFragment:function(a){return a.replace(/[^\w\.~\-!\$&'\(\)\*\+,;=:@\/\?\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)},decode:function(a){return decodeURIComponent(a)},decodePath:function(a){return a.split(/%2f/i).map(decodeURIComponent).reduce(function(a,b){return a?b?a+"%2F"+b:a:b},"")}};
},{}],27:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}var e=require("../lib/base/CatberryBase"),f=require("promise");"Promise"in window||(window.Promise=f);var g=function(a){function e(){b(this,e);var d=c(this,a.call(this));return d._router=null,d}return d(e,a),e.prototype.wrapDocument=function(){this._router=this.locator.resolve("requestRouter")},e.prototype.startWhenReady=function(){var a=this;return window.catberry?f.resolve():new f(function(b,c){window.document.addEventListener("DOMContentLoaded",function(){try{a.wrapDocument(),window.catberry=a,b()}catch(a){c(a)}})})},e}(e);module.exports=g;
},{"../lib/base/CatberryBase":41,"promise":74}],28:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}var e=require("../lib/base/CookieWrapperBase"),f=function(a){function e(d){b(this,e);var f=c(this,a.call(this));return f._window=d.resolve("window"),f}return d(e,a),e.prototype.getCookieString=function(){return this._window.document.cookie?this._window.document.cookie.toString():""},e.prototype.set=function(a){var b=this._convertToCookieSetup(a);return this._window.document.cookie=b,b},e}(e);module.exports=f;
},{"../lib/base/CookieWrapperBase":42}],29:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}function e(a){var b=Object.create(null);return Array.prototype.forEach.call(a,function(a){b[a.name]=a.value}),b}function f(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector;return b.bind(a)}function g(a,b){var c=Object.create(a),d=[],e={};for(var f in a)d.push(f);return d.forEach(function(b){return"function"==typeof a[b]?void(e[b]={get:function(){return a[b].bind(a)}}):void(e[b]={get:function(){return a[b]},set:function(c){a[b]=c}})}),e.currentTarget={get:b},Object.defineProperties(c,e),Object.seal(c),Object.freeze(c),c}function h(a){return a.nodeName===q.SCRIPT||a.nodeName===q.STYLE||a.nodeName===q.LINK&&"stylesheet"===a.getAttribute("rel")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},j=require("morphdom"),k=require("uuid"),l=require("../lib/helpers/errorHelper"),m=require("../lib/helpers/moduleHelper"),n=require("../lib/helpers/hrTimeHelper"),o=require("../lib/base/DocumentRendererBase"),p={$$head:"$$head",$$document:"$$document"},q={HEAD:"HEAD",STYLE:"STYLE",SCRIPT:"SCRIPT",LINK:"LINK"},r={abort:!0,blur:!0,error:!0,focus:!0,load:!0,mouseenter:!0,mouseleave:!0,resize:!0,unload:!0},s=function(a){function o(d){b(this,o);var e=c(this,a.call(this,d));return e._componentInstances=Object.create(null),e._componentElements=Object.create(null),e._componentBindings=Object.create(null),e._currentChangedStores=Object.create(null),e._window=d.resolve("window"),e._config=d.resolve("config"),e._storeDispatcher=d.resolve("storeDispatcher"),e._renderedPromise=null,e._isUpdating=!1,e._awaitingRouting=null,e._currentRoutingContext=null,e._eventBus.on("storeChanged",function(a){e._currentChangedStores[a]=!0,e._isStateChanging||e._updateStoreComponents()}),e}return d(o,a),o.prototype.initWithState=function(a,b){var c=this;return this._getPromiseForReadyState().then(function(){return c._currentRoutingContext=b,c._storeDispatcher.setState(a,b)}).then(function(){var a=c._componentLoader.getComponentsByNames(),b=c._window.document.documentElement,d=function(b){return c._initializeComponent(b,a)};return c._traverseComponents([b],a,d)}).then(function(){return c._eventBus.emit("documentRendered",c._currentRoutingContext)})},o.prototype.render=function(a,b){var c=this;return this._awaitingRouting={state:a,routingContext:b},this._isStateChanging?this._renderedPromise:(this._isStateChanging=!0,this._renderedPromise=this._getPromiseForReadyState().then(function(){return c._updateStoreComponents()}).catch(function(a){return c._eventBus.emit("error",a)}).then(function(){c._isStateChanging=!1}),this._renderedPromise)},o.prototype.renderComponent=function(a,b){var c=this;return this._getPromiseForReadyState().then(function(){var d=c._getId(a),e=m.getOriginalComponentName(a.tagName);b||(b=c._createRenderingContext([]),b.rootIds[d]=!0);var f=a.children.length>0,g=b.components[e];if(!g)return null;b.renderedIds[d]=!0;var h=c._componentInstances[d];h||(g.constructor.prototype.$context=c._getComponentContext(g,a),h=new g.constructor(c._serviceLocator),h.$context=g.constructor.prototype.$context,c._componentInstances[d]=h);var i={name:e,context:h.$context};c._componentElements[d]=a;var k=n.get();return c._eventBus.emit("componentRender",i),Promise.resolve().then(function(){return d in b.rootIds&&f?c._unbindAll(a,b):[]}).catch(function(a){return c._eventBus.emit("error",a)}).then(function(){var a=m.getMethodToInvoke(h,"render");return m.getSafePromise(a)}).then(function(a){return g.template.render(a)}).catch(function(b){return c._handleRenderError(a,g,b)}).then(function(d){var e=a.tagName===q.HEAD;if(""===d&&e)return[];var f=a.cloneNode(!1);if(f.innerHTML=d,e)return c._mergeHead(a,f),[];j(a,f,{onBeforeMorphElChildren:function(d){return d===a||!c._isComponentElement(b.components,d)}});var g=c._findNestedComponents(a,b.components).map(function(a){return c.renderComponent(a,b)});return Promise.all(g)}).then(function(){return i.hrTime=n.get(k),i.time=n.toMilliseconds(i.hrTime),c._eventBus.emit("componentRendered",i),c._bindComponent(a)}).then(function(){d in b.rootIds&&f&&c._collectRenderingGarbage(b)}).catch(function(a){return c._eventBus.emit("error",a)})})},o.prototype.getComponentById=function(a){var b=this._window.document.getElementById(a);return this.getComponentByElement(b)},o.prototype.queryComponentSelector=function(a,b){var c=this._isComponentObject(b)?b.$context.element:this._window.document;return this.getComponentByElement(c.querySelector(a))},o.prototype.queryComponentSelectorAll=function(a,b){var c=this._isComponentObject(b)?b.$context.element:this._window.document;return this._mapElementsToComponents(c.querySelectorAll(a))},o.prototype.getComponentsByTagName=function(a,b){var c=this._isComponentObject(b)?b.$context.element:this._window.document;return this._mapElementsToComponents(c.getElementsByTagName(a))},o.prototype.getComponentsByClassName=function(a,b){var c=this._isComponentObject(b)?b.$context.element:this._window.document;return this._mapElementsToComponents(c.getElementsByClassName(a))},o.prototype.getComponentByElement=function(a){if(!a)return null;var b=a[m.COMPONENT_ID];return b?this._componentInstances[b]||null:null},o.prototype.collectGarbage=function(){var a=this;return this._getPromiseForReadyState().then(function(){var b={roots:[],components:a._componentLoader.getComponentsByNames()};return Object.keys(a._componentElements).forEach(function(c){if(!p.hasOwnProperty(c))for(var d=a._componentElements[c];d!==a._window.document.documentElement;){if(null===d.parentElement){b.roots.push(d);break}if(a._isComponentElement(b.components,d.parentElement))break;d=d.parentElement}}),a._removeDetachedComponents(b)})},o.prototype.createComponent=function(a,b){var c=this;return"string"!=typeof a?Promise.reject(new Error("The tag name must be a string")):(b=b||Object.create(null),this._getPromiseForReadyState().then(function(){var d=c._componentLoader.getComponentsByNames(),e=m.getOriginalComponentName(a);if(m.isHeadComponent(e)||m.isDocumentComponent(e)||!(e in d))return Promise.reject(new Error('Component for tag "'+a+'" not found'));var f=m.getTagNameForComponentName(e),g=c._window.document.createElement(f);return Object.keys(b).forEach(function(a){return g.setAttribute(a,b[a])}),c.renderComponent(g).then(function(){return g})}))},o.prototype._collectRenderingGarbage=function(a){var b=this;Object.keys(a.unboundIds).forEach(function(c){c in a.renderedIds||b._removeComponentById(c)})},o.prototype._removeDetachedComponents=function(a){var b=this;if(0===a.roots.length)return Promise.resolve();var c=a.roots.pop();return this._traverseComponents([c],a.components,function(a){return b._removeDetachedComponent(a)}).then(function(){return b._removeDetachedComponents(a)})},o.prototype._removeDetachedComponent=function(a){var b=this,c=this._getId(a);return this._unbindComponent(a).then(function(){return b._removeComponentById(c)})},o.prototype._unbindAll=function(a,b){var c=this,d=function(a){var d=c._getId(a);return b.unboundIds[d]=!0,c._unbindComponent(a)};return this._traverseComponents([a],b.components,d)},o.prototype._unbindComponent=function(a){var b=this,c=this._getId(a),d=this._componentInstances[c];if(!d)return Promise.resolve();c in this._componentBindings&&(Object.keys(this._componentBindings[c]).forEach(function(d){a.removeEventListener(d,b._componentBindings[c][d].handler,r.hasOwnProperty(d))}),delete this._componentBindings[c]);var e=m.getMethodToInvoke(d,"unbind");return m.getSafePromise(e).then(function(){b._eventBus.emit("componentUnbound",{element:a,id:a.id||null})}).catch(function(a){return b._eventBus.emit("error",a)})},o.prototype._removeComponentById=function(a){delete this._componentElements[a],delete this._componentInstances[a],delete this._componentBindings[a]},o.prototype._bindComponent=function(a){var b=this,c=this._getId(a),d=this._componentInstances[c];if(!d)return Promise.resolve();var e=m.getMethodToInvoke(d,"bind");return m.getSafePromise(e).then(function(e){return e&&"object"===("undefined"==typeof e?"undefined":i(e))?(b._componentBindings[c]=Object.create(null),Object.keys(e).forEach(function(f){if(f=f.toLowerCase(),!(f in b._componentBindings[c])){var g=Object.create(null);Object.keys(e[f]).forEach(function(a){var b=e[f][a];"function"==typeof b&&(g[a]=b.bind(d))}),b._componentBindings[c][f]={handler:b._createBindingHandler(a,g),selectorHandlers:g},a.addEventListener(f,b._componentBindings[c][f].handler,r.hasOwnProperty(f))}}),void b._eventBus.emit("componentBound",{element:a,id:a.id||null})):void b._eventBus.emit("componentBound",{element:a,id:a.id||null})})},o.prototype._createBindingHandler=function(a,b){var c=this,d=Object.keys(b);return function(e){var h=e.target,i=g(e,function(){return h}),j=f(h),k=d.some(function(a){return!!j(a)&&(b[a](i),!0)});if(!k&&e.bubbles)for(;h.parentElement&&h!==a&&(h=h.parentElement,j=f(h),!(k=c._tryDispatchEvent(d,j,b,i))););}},o.prototype._tryDispatchEvent=function(a,b,c,d){return a.some(function(a){return!!b(a)&&(c[a](d),!0)})},o.prototype._isComponentElement=function(a,b){return!!m.isComponentNode(b)&&m.getOriginalComponentName(b.nodeName)in a},o.prototype._isComponentObject=function(a){return a&&a.$context&&"object"===i(a.$context)&&a.$context.element instanceof this._window.Element},o.prototype._mapElementsToComponents=function(a){var b=this,c=[];return Array.prototype.forEach.call(a,function(a){var d=b.getComponentByElement(a);d&&c.push(d)}),c},o.prototype._traverseComponents=function(a,b,c){if(0===a.length)return Promise.resolve();var d=a.shift();return a=a.concat(this._findNestedComponents(d,b)),this._traverseComponents(a,b,c).then(function(){return c(d)})},o.prototype._findNestedComponents=function(a,b){for(var c=this,d=[],e=[a];e.length>0;){var f=e.shift().children;f&&Array.prototype.forEach.call(f,function(a){return c._isComponentElement(b,a)?void d.push(a):void e.push(a)})}return d},o.prototype._handleRenderError=function(a,b,c){var d=this;return this._eventBus.emit("error",c),Promise.resolve().then(function(){return a.tagName===q.HEAD?"":!d._config.isRelease&&c instanceof Error?l.prettyPrint(c,d._window.navigator.userAgent):b.errorTemplate?b.errorTemplate.render(c):""}).catch(function(){return""})},o.prototype._updateStoreComponents=function(){var a=this;if(this._isUpdating)return Promise.resolve();var b=this._window.document.documentElement.getAttribute(m.ATTRIBUTE_STORE);if(b in this._currentChangedStores){var c=this._currentRoutingContext.location.toString();return c===this._window.location.toString()?(this._window.location.reload(),Promise.resolve()):(this._window.location.assign(c),Promise.resolve())}this._isUpdating=!0,this._awaitingRouting&&!function(){var b=a._componentLoader.getComponentsByNames(),c=a._storeDispatcher.setState(a._awaitingRouting.state,a._awaitingRouting.routingContext);c.forEach(function(b){a._currentChangedStores[b]=!0}),a._currentRoutingContext=a._awaitingRouting.routingContext,Object.keys(a._componentInstances).forEach(function(c){var d=a._componentInstances[c];d.$context=a._getComponentContext(b[d.$context.name],d.$context.element)}),a._awaitingRouting=null}();var d=Object.keys(this._currentChangedStores);if(0===d.length)return this._isUpdating=!1,Promise.resolve();this._currentChangedStores=Object.create(null);var e=this._createRenderingContext(d),f=e.roots.map(function(b){return e.rootIds[a._getId(b)]=!0,a.renderComponent(b,e)});return Promise.all(f).catch(function(b){return a._eventBus.emit("error",b)}).then(function(){return a._isUpdating=!1,a._eventBus.emit("documentUpdated",d),a._updateStoreComponents()})},o.prototype._mergeHead=function(a,b){if(b){for(var c=Object.create(null),d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];h(e)?c[this._getElementKey(e)]=!0:(a.removeChild(e),d--)}for(var f=0;f<b.children.length;f++){var g=b.children[f];this._getElementKey(g)in c||(a.appendChild(g),f--)}}},o.prototype._getElementKey=function(a){var b=[];switch(a.nodeName){case q.LINK:b.push("href="+a.getAttribute("href"));break;case q.SCRIPT:b.push("src="+a.getAttribute("src"))}return"<"+a.nodeName+" "+b.sort().join(" ")+">"+a.textContent+"</"+a.nodeName+">"},o.prototype._initializeComponent=function(a,b){var c=this;return Promise.resolve().then(function(){var d=m.getOriginalComponentName(a.nodeName);if(!(d in b))return null;var e=c._getId(a),f=b[d].constructor;f.prototype.$context=c._getComponentContext(b[d],a);var g=new f(c._serviceLocator);return g.$context=f.prototype.$context,c._componentElements[e]=a,c._componentInstances[e]=g,c._storeDispatcher.getStore(a.getAttribute(m.ATTRIBUTE_STORE)),c._eventBus.emit("componentRendered",{name:d,attributes:g.$context.attributes,context:g.$context}),c._bindComponent(a)})},o.prototype._getComponentContext=function(a,b){var c=this,d=b.getAttribute(m.ATTRIBUTE_STORE),f=Object.create(this._currentRoutingContext);return this._storeDispatcher.getStore(d),Object.defineProperties(f,{name:{get:function(){return a.name},enumerable:!0},attributes:{get:function(){return e(b.attributes)},enumerable:!0}}),f.element=b,f.getComponentById=function(a){return c.getComponentById(a)},f.getComponentByElement=function(a){return c.getComponentByElement(a)},f.getComponentsByTagName=function(a,b){return c.getComponentsByTagName(a,b)},f.getComponentsByClassName=function(a,b){return c.getComponentsByClassName(a,b)},f.queryComponentSelector=function(a,b){return c.queryComponentSelector(a,b)},f.queryComponentSelectorAll=function(a,b){return c.queryComponentSelectorAll(a,b)},f.createComponent=function(a,b){return c.createComponent(a,b)},f.collectGarbage=function(){return c.collectGarbage()},f.getStoreData=function(){var a=b.getAttribute(m.ATTRIBUTE_STORE);return c._storeDispatcher.getStoreData(a)},f.sendAction=function(a,d){var e=b.getAttribute(m.ATTRIBUTE_STORE);return c._storeDispatcher.sendAction(e,a,d)},f.sendBroadcastAction=function(a,b){return c._storeDispatcher.sendBroadcastAction(a,b)},Object.freeze(f)},o.prototype._findRenderingRoots=function(a){var b=this,c=this._window.document.head.getAttribute(m.ATTRIBUTE_STORE),d=this._componentLoader.getComponentsByNames(),e=Object.create(null),f=Object.create(null),g=Object.create(null),h=[];return a.forEach(function(a){f[a]=!0;var c=b._window.document.querySelectorAll("["+m.ATTRIBUTE_STORE+'="'+a+'"]');0!==c.length&&(e[a]=c)}),c in f&&m.HEAD_COMPONENT_NAME in d&&(g[this._getId(this._window.document.head)]=!0,h.push(this._window.document.head)),a.forEach(function(a){if(a in e){var c=Object.create(null);Array.prototype.forEach.call(e[a],function(a){if(m.isComponentNode(a)){var e=a,i=e,j=b._getId(a);if(!(j in c)){for(c[j]=!0;e.parentElement;){e=e.parentElement;var k=b._getId(e);if(k in c)return;var l=e.getAttribute(m.ATTRIBUTE_STORE),n=m.getOriginalComponentName(e.tagName);l&&l in f&&n in d&&(i=e,j=k)}j in g||(g[j]=!0,h.push(i))}}})}}),h},o.prototype._createRenderingContext=function(a){var b=this._componentLoader.getComponentsByNames();return{config:this._config,renderedIds:Object.create(null),unboundIds:Object.create(null),isHeadRendered:!1,bindMethods:[],routingContext:this._currentRoutingContext,components:b,rootIds:Object.create(null),roots:a?this._findRenderingRoots(a):[]}},o.prototype._getId=function(a){if(a===this._window.document.documentElement)return p.$$document;if(a===this._window.document.head)return p.$$head;if(!a[m.COMPONENT_ID])for(a[m.COMPONENT_ID]=k.v4();a[m.COMPONENT_ID]in this._componentInstances;)a[m.COMPONENT_ID]=k.v4();return a[m.COMPONENT_ID]},o}(o);module.exports=s;
},{"../lib/base/DocumentRendererBase":43,"../lib/helpers/errorHelper":47,"../lib/helpers/hrTimeHelper":31,"../lib/helpers/moduleHelper":48,"morphdom":71,"uuid":83}],30:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a){for(;a&&a.nodeName!==g&&a.nodeName!==h;)a=a.parentNode;return a&&a.nodeName===g?a:null}var c=require("catberry-uri").URI,d=0,e="href",f="target",g="A",h="BODY",i=function(){function h(b){var d=this;a(this,h),this._eventBus=b.resolve("eventBus"),this._window=b.resolve("window"),this._documentRenderer=b.resolve("documentRenderer"),this._stateProvider=b.resolve("stateProvider"),this._contextFactory=b.resolve("contextFactory"),this._isHistorySupported=this._window.history&&this._window.history.pushState instanceof Function,this._wrapDocument(),this._location=new c(this._window.location.toString()),this._state=this._stateProvider.getStateByUri(this._location),this._isStateInitialized=!1,this._referrer="",this._changeState(this._state).catch(function(a){return d._handleError(a)})}return h.prototype.go=function(a,b){try{var d=new c(a).resolveRelative(this._location),e=d.toString(),f=this._location.authority?this._location.authority.toString():null,g=d.authority?d.authority.toString():null;if(!this._isHistorySupported||d.scheme!==this._location.scheme||g!==f)return this._window.location.assign(e),Promise.resolve();var h=d.query?d.query.toString():null,i=this._location.query?this._location.query.toString():null;if(d.path===this._location.path&&h===i)return this._location=d,this._window.location.hash=this._location.fragment||"",Promise.resolve();var j=this._stateProvider.getStateByUri(d);return j?(this._state=j,this._referrer=this._location,this._location=d,b||this._window.history.pushState(j,"",e),this._changeState(j)):(this._window.location.assign(e),Promise.resolve())}catch(a){return Promise.reject(a)}},h.prototype._changeState=function(a){var b=this;return Promise.resolve().then(function(){if(null===a)return b._window.location.reload(),null;var c=b._contextFactory.create({referrer:b._referrer||b._window.document.referrer,location:b._location,userAgent:b._window.navigator.userAgent});return b._isStateInitialized?b._documentRenderer.render(a,c):(b._isStateInitialized=!0,b._documentRenderer.initWithState(a,c))})},h.prototype._wrapDocument=function(){var a=this;this._isHistorySupported&&(this._window.addEventListener("popstate",function(){return Promise.resolve().then(function(){return a.go(a._window.location.toString(),!0)}).catch(function(b){return a._handleError(b)})}),this._window.document.body.addEventListener("click",function(c){if(!c.defaultPrevented)if(c.target.tagName===g)a._linkClickHandler(c,c.target);else{var d=b(c.target);if(!d)return;a._linkClickHandler(c,d)}}))},h.prototype._linkClickHandler=function(a,b){var c=this,g=b.getAttribute(f);if(!g&&!(a.button!==d||a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)){var h=b.getAttribute(e);h&&(a.preventDefault(),this.go(h).catch(function(a){return c._handleError(a)}))}},h.prototype._handleError=function(a){this._eventBus.emit("error",a)},h}();module.exports=i;
},{"catberry-uri":21}],31:[function(require,module,exports){
"use strict";module.exports={get:require("browser-process-hrtime"),toMessage:require("pretty-hrtime"),toMilliseconds:function(a){return 1e3*a[0]+Math.round(a[1]/1e6)}};
},{"browser-process-hrtime":10,"pretty-hrtime":72}],32:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},f=require("../../lib/helpers/moduleHelper"),g=require("../../lib/base/LoaderBase"),h=function(a){function g(d){b(this,g);var e;try{e=d.resolveAll("componentTransform")}catch(a){e=[]}var f=c(this,a.call(this,d,e));return f._serviceLocator=d,f._eventBus=d.resolve("eventBus"),f._templateProvider=d.resolve("templateProvider"),f._loadedComponents=null,f}return d(g,a),g.prototype.load=function(){var a=this;return this._loadedComponents?Promise.resolve(this._loadedComponents):(this._loadedComponents=Object.create(null),Promise.resolve().then(function(){return a._serviceLocator.resolveAll("component")}).catch(function(){return[]}).then(function(b){var c=[];return b.forEach(function(b){b&&"object"===("undefined"==typeof b?"undefined":e(b))&&c.unshift(a._processComponent(b))}),Promise.all(c)}).then(function(b){return b.forEach(function(b){b&&(a._loadedComponents[b.name]=b)}),a._eventBus.emit("allComponentsLoaded",b),a._loadedComponents}))},g.prototype._processComponent=function(a){var b=this,c=Object.create(a);return this._applyTransforms(c).then(function(d){if(!d)throw new Error('Transformation for the "'+a.name+'" component returned a bad result');return c=d,b._templateProvider.registerCompiled(c.name,c.templateSource),c.template={render:function(a){return b._templateProvider.render(c.name,a)}},"string"==typeof c.errorTemplateSource&&!function(){var a=f.getNameForErrorTemplate(c.name);b._templateProvider.registerCompiled(a,c.errorTemplateSource),c.errorTemplate={render:function(c){return b._templateProvider.render(a,c)}}}(),b._eventBus.emit("componentLoaded",c),c}).catch(function(a){return b._eventBus.emit("error",a),null})},g.prototype.getComponentsByNames=function(){return this._loadedComponents||Object.create(null)},g}(g);module.exports=h;
},{"../../lib/base/LoaderBase":44,"../../lib/helpers/moduleHelper":48}],33:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},f=require("../../lib/base/LoaderBase"),g=function(a){function f(d){b(this,f);var e;try{e=d.resolveAll("storeTransform")}catch(a){e=[]}var g=c(this,a.call(this,d,e));return g._serviceLocator=d,g._eventBus=d.resolve("eventBus"),g._loadedStores=null,g}return d(f,a),f.prototype.load=function(){var a=this;return this._loadedStores?Promise.resolve(this._loadedStores):(this._loadedStores=Object.create(null),Promise.resolve().then(function(){return a._serviceLocator.resolveAll("store")}).catch(function(){return[]}).then(function(b){var c=[];return b.forEach(function(b){b&&"object"===("undefined"==typeof b?"undefined":e(b))&&c.unshift(a._getStore(b))}),Promise.all(c)}).then(function(b){return b.forEach(function(b){b&&(a._loadedStores[b.name]=b)}),a._eventBus.emit("allStoresLoaded",a._loadedStores),Promise.resolve(a._loadedStores)}))},f.prototype._getStore=function(a){var b=this;return this._applyTransforms(a).then(function(c){if(!c)throw new Error('Transformation for the "'+a.name+'" store returned a bad result');return b._eventBus.emit("storeLoaded",c),c}).catch(function(a){return b._eventBus.emit("error",a),null})},f.prototype.getStoresByNames=function(){return this._loadedStores||Object.create(null)},f}(f);module.exports=g;
},{"../../lib/base/LoaderBase":44}],34:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=require("../../lib/helpers/propertyHelper"),g=require("../../lib/base/ModuleApiProviderBase"),h=function(a){function f(d){return b(this,f),c(this,a.call(this,d))}return d(f,a),f.prototype.notFound=function(){var a=this.locator.resolve("window");return a.location.reload(),Promise.resolve()},f.prototype.redirect=function(a){var b=this.locator.resolve("requestRouter");return b.go(a)},f.prototype.clearFragment=function(){var a=this.locator.resolve("window"),b=a.document.body.scrollTop;return a.location.hash="",a.document.body.scrollTop=b,Promise.resolve()},e(f,[{key:"isBrowser",get:function(){return!0}},{key:"isServer",get:function(){return!1}}]),f}(g);module.exports=h;
},{"../../lib/base/ModuleApiProviderBase":45,"../../lib/helpers/propertyHelper":49}],35:[function(require,module,exports){
"use strict";function a(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&void 0===a[e]&&Object.defineProperty(a,e,f)}return a}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):a(b,c))}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},f=require("../../lib/base/StateProviderBase"),g=function(a){function f(){return b(this,f),c(this,a.apply(this,arguments))}return d(f,a),f.prototype._getRouteDescriptors=function(a){var b=[],c=void 0;try{c=a.resolveAll("routeDefinition")}catch(a){c=[]}var d=Object.create(null);try{a.resolveAll("routeDescriptor").forEach(function(a){d[a.expression]=a})}catch(a){}return c.forEach(function(a){if("string"==typeof a)return void b.push(d[a]);if("object"===("undefined"==typeof a?"undefined":e(a))&&"string"==typeof a.expression){var c=d[a.expression];return"string"==typeof a.name&&(c.name=a.name),a.map instanceof Function&&(c.map=a.map),void b.push(c)}"object"===("undefined"==typeof a?"undefined":e(a))&&a.expression instanceof RegExp&&a.map instanceof Function&&b.push(a)}),b},f}(f);module.exports=g;
},{"../../lib/base/StateProviderBase":46}],36:[function(require,module,exports){
"use strict";module.exports=require("./lib/Bootstrapper");
},{"./lib/Bootstrapper":1}],37:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=require("./helpers/propertyHelper"),c=function(){function c(b){a(this,c),this._serviceLocator=b}return c.prototype.create=function(a){var c=this._serviceLocator.resolve("moduleApiProvider"),d=Object.create(c);return Object.keys(a).forEach(function(c){return b.defineReadOnly(d,c,a[c])}),d},c}();module.exports=c;
},{"./helpers/propertyHelper":49}],38:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=require("events"),c=function(){function c(){a(this,c),this._emitter=new b.EventEmitter,this._emitter.setMaxListeners(0),this._toInvoke=Object.create(null),this._inProgress=Object.create(null)}return c.prototype.add=function(a,b){this._toInvoke[a]=b},c.prototype.isRegistered=function(a){return"function"==typeof this._toInvoke[a]},c.prototype.invoke=function(a){var b=this;return this.isRegistered(a)?this._inProgress[a]?new Promise(function(c,d){b._emitter.once(a,c),b._emitter.once(a+"--error",d)}):(this._inProgress[a]=!0,this._toInvoke[a]().then(function(c){b._emitter.emit(a,c),b._inProgress[a]=null}).catch(function(c){b._emitter.emit(a+"--error",c),b._inProgress[a]=null}),this.invoke(a)):Promise.reject(new Error("There is no such registered method"))},c}();module.exports=c;
},{"events":51}],39:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=require("./SerialWrapper"),c=require("./helpers/moduleHelper"),d=require("./helpers/propertyHelper"),e=6e4,f=function(){function f(c){a(this,f),this._serviceLocator=c,this._storeLoader=c.resolve("storeLoader"),this._eventBus=c.resolve("eventBus"),this._storeInstances=Object.create(null),this._lastData=Object.create(null),this._lastState=null,this._dependants=Object.create(null),this._serialWrapper=new b,this._currentBasicContext=null}return f.prototype.getStoreData=function(a){var b=this;if(!this._lastState)return this._errorState();if("string"!=typeof a)return Promise.resolve(null);if(a in this._lastData){var c=Date.now()-this._lastData[a].createdAt;if(c<=this._lastData[a].lifetime)return Promise.resolve(this._lastData[a].data);delete this._lastData[a]}this._eventBus.emit("storeDataLoad",{name:a});var d=this.getStore(a);if(!d)return this._errorStoreNotFound(a);var f="number"==typeof d.$lifetime?d.$lifetime:e;return this._serialWrapper.invoke(a).then(function(c){return b._lastData[a]={data:c,lifetime:f,createdAt:Date.now()},b._eventBus.emit("storeDataLoaded",{name:a,data:c,lifetime:f}),c})},f.prototype.sendAction=function(a,b,d){var e=this;if(!this._lastState)return this._errorState();var f={storeName:a,actionName:b,args:d};this._eventBus.emit("actionSend",f);var g=this.getStore(a);if(!g)return this._errorStoreNotFound(a);var h=c.getMethodToInvoke(g,"handle",b);return c.getSafePromise(function(){return h(d)}).then(function(a){return e._eventBus.emit("actionSent",f),a})},f.prototype.sendBroadcastAction=function(a,b){var d=this,e=[],f=this._storeLoader.getStoresByNames(),g=c.getCamelCaseName("handle",a);return Object.keys(f).forEach(function(c){var h=f[c],i=h.constructor.prototype[g];if("function"==typeof i){var j=d.sendAction(h.name,a,b);e.push(j)}}),Promise.all(e)},f.prototype.setState=function(a,b){var c=this;a=a||Object.create(null);var d=this._storeLoader.getStoresByNames(),e=Object.keys(a);if(e.forEach(function(a){a in d||c._eventBus.emit("warn",'Store "'+a+'" does not exist (might be a typo in a route)')}),!this._lastState)return this._currentBasicContext=b,this._lastState=a,[];var f=Object.create(null);Object.keys(this._lastState).filter(function(b){return!(b in a)}).forEach(function(a){f[a]=!0}),e.forEach(function(b){if(!(b in c._lastState))return void(f[b]=!0);var d=Object.keys(c._lastState[b]),e=Object.keys(a[b]);return e.length!==d.length?void(f[b]=!0):void e.every(function(d){return a[b][d]===c._lastState[b][d]||(f[b]=!0,!1)})}),this._lastState=a,this._currentBasicContext!==b&&(this._currentBasicContext=b,Object.keys(this._storeInstances).forEach(function(a){c._storeInstances[a].$context=c._getStoreContext(a)}));var g=Object.create(null);return Object.keys(f).forEach(function(a){var b=c.getStore(a);b&&b.$context.changed().forEach(function(a){g[a]=!0})}),this._eventBus.emit("stateChanged",{oldState:this._lastState,newState:a}),Object.keys(g)},f.prototype._getStoreContext=function(a){var b=this,c=Object.create(this._currentBasicContext);return d.defineReadOnly(c,"name",a),d.defineReadOnly(c,"state",this._lastState[a]||Object.create(null)),c.changed=function(){for(var c=Object.create(null),d=[a];d.length>0;){var e=d.shift();e in c||(c[e]=!0,e in b._dependants&&(d=d.concat(Object.keys(b._dependants[e]))),delete b._lastData[e],b._eventBus.emit("storeChanged",e))}return Object.keys(c)},c.getStoreData=function(c){return c===a?Promise.resolve(null):b.getStoreData(c)},c.setDependency=function(c){c in b._dependants||(b._dependants[c]=Object.create(null)),b._dependants[c][a]=!0},c.unsetDependency=function(c){c in b._dependants&&delete b._dependants[c][a]},c.sendAction=function(a,c,d){return b.sendAction(a,c,d)},c.sendBroadcastAction=function(a,c){return b.sendBroadcastAction(a,c)},c},f.prototype.getStore=function(a){var b=this;if(!a)return null;var d=this._storeInstances[a];if(d)return d;var e=this._storeLoader.getStoresByNames();this._serviceLocator.resolve("config");if(!(a in e))return null;var f=e[a].constructor;return f.prototype.$context=this._getStoreContext(a),this._storeInstances[a]=new f(this._serviceLocator),this._storeInstances[a].$context=f.prototype.$context,this._serialWrapper.add(a,function(){var d=c.getMethodToInvoke(b._storeInstances[a],"load");return c.getSafePromise(d)}),this._storeInstances[a]},f.prototype._errorStoreNotFound=function(a){return Promise.reject(new Error('Store "'+a+'" not found'))},f.prototype._errorState=function(){return Promise.reject(new Error("State should be set before any request"))},f}();module.exports=f;
},{"./SerialWrapper":38,"./helpers/moduleHelper":48,"./helpers/propertyHelper":49}],40:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=require("../helpers/moduleHelper"),c=require("../providers/StateProvider"),d=require("../loaders/StoreLoader"),e=require("../loaders/ComponentLoader"),f=require("../DocumentRenderer"),g=require("../RequestRouter"),h=require("../base/ModuleApiProviderBase"),i=require("../ContextFactory"),j=require("events").EventEmitter,k=function(){function b(c){a(this,b),this._catberryConstructor=c}return b.prototype.create=function(a){var b=a||{},c=new this._catberryConstructor;return this.configure(b,c.locator),c.events=new h(c.locator),c},b.prototype.configure=function(a,b){var h=new j;h.setMaxListeners(0),b.registerInstance("eventBus",h),b.registerInstance("config",a),b.register("stateProvider",c,!0),b.register("contextFactory",i,!0),b.register("storeLoader",d,!0),b.register("componentLoader",e,!0),b.register("documentRenderer",f,!0),b.register("requestRouter",g,!0)},b}();module.exports=k;
},{"../ContextFactory":37,"../DocumentRenderer":29,"../RequestRouter":30,"../base/ModuleApiProviderBase":45,"../helpers/moduleHelper":48,"../loaders/ComponentLoader":32,"../loaders/StoreLoader":33,"../providers/StateProvider":35,"events":51}],41:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=require("catberry-locator"),c=function c(){a(this,c),this.locator=new b,this.version="8.4.2",this.events=null,this.locator.registerInstance("serviceLocator",this.locator),this.locator.registerInstance("catberry",this)};module.exports=c;
},{"catberry-locator":14}],42:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function(){function b(){a(this,b)}return b.prototype.getAll=function(){var a=this.getCookieString();return this._parseCookieString(a)},b.prototype.get=function(a){return"string"!=typeof a?"":this.getAll()[a]||""},b.prototype._parseCookieString=function(a){var b=Object.create(null);return"string"!=typeof a?b:(a.split(/; */).forEach(function(a){var c=a.indexOf("=");if(!(c<0)){var d=a.substring(0,c).trim();b[d]=a.substring(c+1).trim().replace(/^"|"$/g,"")}}),b)},b.prototype._convertToCookieSetup=function(a){if("string"!=typeof a.key||"string"!=typeof a.value)throw new Error("Wrong key or value");var b=a.key+"="+a.value;return"number"==typeof a.maxAge&&(b+="; Max-Age="+a.maxAge.toFixed(),a.expires||(a.expires=new Date(Date.now()+1e3*a.maxAge))),a.expires instanceof Date&&(b+="; Expires="+a.expires.toUTCString()),"string"==typeof a.path&&(b+="; Path="+a.path),"string"==typeof a.domain&&(b+="; Domain="+a.domain),"boolean"==typeof a.secure&&a.secure&&(b+="; Secure"),"boolean"==typeof a.httpOnly&&a.httpOnly&&(b+="; HttpOnly"),b},b}();module.exports=b;
},{}],43:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function(){function b(c){var d=this;a(this,b),this._serviceLocator=c,this._contextFactory=c.resolve("contextFactory"),this._componentLoader=c.resolve("componentLoader"),this._eventBus=c.resolve("eventBus");var e=c.resolve("storeLoader");this._loading=Promise.all([this._componentLoader.load(),e.load()]).then(function(){d._loading=null,d._eventBus.emit("ready")}).catch(function(a){return d._eventBus.emit("error",a)})}return b.prototype._getPromiseForReadyState=function(){return this._loading?this._loading:Promise.resolve()},b}();module.exports=b;
},{}],44:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=function(){function b(c,d){a(this,b),this._transforms=d,this._eventBus=c.resolve("eventBus")}return b.prototype._applyTransforms=function(a,b){var c=this;if(void 0===b&&(b=this._transforms.length-1),b<0)return Promise.resolve(a);var d=this._transforms[b];return Promise.resolve().then(function(){return d.transform(a)}).catch(function(b){return c._eventBus.emit("error",b),a}).then(function(a){return c._applyTransforms(a,b-1)})},b}();module.exports=b;
},{}],45:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a,b){if("string"!=typeof a)throw new Error("Event name should be a string");if("function"!=typeof b)throw new Error("Event handler should be a function")}function c(){}var d=function(){function d(b){a(this,d),this.locator=b,this.cookie=b.resolve("cookieWrapper"),this._eventBus=b.resolve("eventBus")}return d.prototype.on=function(a,c){return b(a,c),this._eventBus.on(a,c),this},d.prototype.once=function(a,c){return b(a,c),this._eventBus.once(a,c),this},d.prototype.removeListener=function(a,c){return b(a,c),this._eventBus.removeListener(a,c),this},d.prototype.removeAllListeners=function(a){return b(a,c),this._eventBus.removeAllListeners(a),this},d.prototype.getRouteURI=function(a,b){var c=this.locator.resolve("stateProvider");return c.getRouteURI(a,b)},d}();module.exports=d;
},{}],46:[function(require,module,exports){
"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a,b,c){b.forEach(function(b,d){var e=c[d];e.stores.forEach(function(c){c in a||(a[c]=Object.create(null)),e.name in a[c]?Array.isArray(a[c][e.name])?a[c][e.name].push(b):a[c][e.name]=[a[c][e.name],b]:a[c][e.name]=b})})}function c(a,d,e){Object.keys(d).forEach(function(f){var g=d[f];if(Array.isArray(g))return void g.forEach(function(b){var d=Object.create(null);d[f]=b,c(a,d,e)});var h="string"==typeof g,i=null,j=null,k=null;e.queryParameters.some(function(a){return i=f.match(a.nameRegExp),h&&a.valueRegExp&&(j=g.match(a.valueRegExp)),!!i&&(k=a,!0)}),k&&(b(a,i.slice(1),k.nameParameters),j&&b(a,j.slice(1),k.valueParameters))})}function d(a,b,c,d){if(!b||0===b.length)return a;d=d||e;for(var f=0,g=b[f],h="",i=0;i<a.length;i++)if(g&&i===g.start){for(h+=d(g,c[g.name]);++i<g.end-1;);f++,g=b[f]}else h+=a[i];return h}function e(a,b){if(Array.isArray(b))throw new Error('Array value is not supported for the parameter "'+a.name+'"');return void 0===b?"":String(b)}var f=require("../helpers/uriHelper"),g=require("catberry-uri"),h=g.URI,i=function(){function g(b){var c=this;a(this,g),this._namedRoutes=Object.create(null),this._routeDescriptors=this._getRouteDescriptors(b),this._routeDescriptors.forEach(function(a){c._restoreRegularExpressions(a),"string"==typeof a.name&&(c._namedRoutes[a.name]=a)}),this._uriMappers=this._getUriMappers()}return g.prototype.getStateByUri=function(a){if(0===this._uriMappers.length)return null;a=a.clone(),a.scheme=null,a.authority=null,a.fragment=null,a.path=f.removeEndSlash(a.path);var b=this._mapState(a);return b?(Object.keys(b).forEach(function(a){return Object.freeze(b[a])}),Object.freeze(b),b):null},g.prototype.getRouteURI=function(a,b){b=b||Object.create(null);var c=this._namedRoutes[a];if(!c)throw new Error('There is no such route called "'+a+'"');var f=new h(c.expression);return c.pathParameters.length>0&&(f.path=d(f.path,c.pathParameters,b,function(a,b){return encodeURIComponent(e(a,b))})),c.queryParameters.length>0&&!function(){var a=Object.create(null);c.queryParameters.forEach(function(c){var e=d(c.nameExpression,c.nameParameters,b);if(e){if(!c.valueParameters)return void(a[e]=null);if(0===c.valueParameters.length)return void(a[e]=c.valueExpression);var f=c.valueParameters[0].name,g=b[f];if(1===c.valueParameters.length&&Array.isArray(g))return a[e]=[],void g.forEach(function(b){var g=Object.create(null);g[f]=b;var h=d(c.valueExpression,c.valueParameters,g);h.length>0&&a[e].push(h)});var h=d(c.valueExpression,c.valueParameters,b);h.length>0&&(a[e]=h)}}),0===Object.keys(a).length?f.query=null:f.query.values=a}(),f.toString()},g.prototype._mapState=function(a){var b=null;return this._uriMappers.some(function(c){return b=c(a),Boolean(b)}),b},g.prototype._getUriMappers=function(){var a=this;return this._routeDescriptors.map(function(b){if(b.expression instanceof RegExp)return function(a){return b.expression.test(a.toString())?b.map(a):null};var c=a._createParameterExtractor(b);return b.map instanceof Function?function(a){var d=c(a);return d?b.map(d):d}:c})},g.prototype._getRouteDescriptors=function(a){},g.prototype._restoreRegularExpressions=function(a){a.pathRegExpSource&&(a.pathRegExp=new RegExp(a.pathRegExpSource,"i")),a.queryParameters&&a.queryParameters.forEach(function(a){a.nameRegExp=new RegExp(a.nameRegExpSource,"i"),a.valueRegExpSource&&(a.valueRegExp=new RegExp(a.valueRegExpSource,"i"))})},g.prototype._createParameterExtractor=function(a){var d=new RegExp(a.pathRegExpSource);return function(e){var f=e.path.match(d);if(!f)return null;var g=Object.create(null),h=f.slice(1);return b(g,h,a.pathParameters),e.query&&e.query.values&&c(g,e.query.values,a),g}},g}();module.exports=i;
},{"../helpers/uriHelper":50,"catberry-uri":21}],47:[function(require,module,exports){
"use strict";function a(a){return a=String(a||""),a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\r?\n/g,"<br/>")}var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},c=/^(?:[\w$]+): (?:.+)\r?\n/i;module.exports={prettyPrint:function(d,e){return d&&"object"===("undefined"==typeof d?"undefined":b(d))?'\n<div style="background-color: white; font-size: 12pt;">\n\t'+(new Date).toUTCString()+";<br/>\n\t"+(e||"Unknown browser")+';<br/>\n\tCatberry@8.4.2 (\n\t<a href="https://github.com/catberry/catberry/issues" target="_blank">\n\t\treport an issue\n\t</a>)\n\t<br/><br/>\n\t<span style="color: red; font-size: 16pt; font-weight: bold;">\n\t\t'+a(d.name)+": "+a(d.message)+"\n\t</span>\n\t<br/><br/>\n\t"+a(d.stack).replace(c,"")+"\n</div>\n":""}};
},{}],48:[function(require,module,exports){
"use strict";function a(){return Promise.resolve()}var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},c={ELEMENT_NODE_TYPE:1,COMPONENT_TAG_PREFIX:"CAT-",COMPONENT_ID:"$catberryId",COMPONENT_PREFIX_REGEXP:/^cat-/i,COMPONENT_ERROR_TEMPLATE_POSTFIX:"--error",DOCUMENT_COMPONENT_NAME:"document",DOCUMENT_TAG_NAME:"HTML",HEAD_TAG_NAME:"HEAD",HEAD_COMPONENT_NAME:"head",ATTRIBUTE_STORE:"cat-store",DEFAULT_LOGIC_FILENAME:"index.js",getNameForErrorTemplate:function(a){return"string"!=typeof a?"":a+c.COMPONENT_ERROR_TEMPLATE_POSTFIX},isDocumentComponent:function(a){return a.toLowerCase()===c.DOCUMENT_COMPONENT_NAME},isHeadComponent:function(a){return a.toLowerCase()===c.HEAD_COMPONENT_NAME},isComponentNode:function(a){return a.nodeType===c.ELEMENT_NODE_TYPE&&(c.COMPONENT_PREFIX_REGEXP.test(a.nodeName)||a.nodeName===c.HEAD_TAG_NAME||a.nodeName===c.DOCUMENT_TAG_NAME)},getOriginalComponentName:function(a){return"string"!=typeof a?"":a===c.DOCUMENT_TAG_NAME?c.DOCUMENT_COMPONENT_NAME:a===c.HEAD_TAG_NAME?c.HEAD_COMPONENT_NAME:a.toLowerCase().replace(c.COMPONENT_PREFIX_REGEXP,"")},getTagNameForComponentName:function(a){if("string"!=typeof a)return"";var b=a.toUpperCase();return a===c.HEAD_COMPONENT_NAME?b:a===c.DOCUMENT_COMPONENT_NAME?c.DOCUMENT_TAG_NAME:c.COMPONENT_TAG_PREFIX+b},getMethodToInvoke:function(d,e,f){if(!d||"object"!==("undefined"==typeof d?"undefined":b(d)))return a;var g=c.getCamelCaseName(e,f);return"function"==typeof d[g]?d[g].bind(d):"function"==typeof d[e]?d[e].bind(d,f):a},getCamelCaseName:function(a,b){return b?(a&&(b=a+"-"+b),b.replace(/(?:[^a-z0-9]+)(\w)/gi,function(a,b){return b.toUpperCase()}).replace(/(^[^a-z0-9])|([^a-z0-9]$)/gi,"")):""},getSafePromise:function(a){try{return Promise.resolve(a())}catch(a){return Promise.reject(a)}}};module.exports=c;
},{}],49:[function(require,module,exports){
"use strict";module.exports={defineReadOnly:function(a,b,c){Object.defineProperty(a,b,{enumerable:!1,configurable:!1,writable:!1,value:c})}};
},{}],50:[function(require,module,exports){
"use strict";var a=/(.+)\/($|\?|#)/;module.exports={removeEndSlash:function(b){return b&&"string"==typeof b?"/"===b?b:b.replace(a,"$1$2"):""}};
},{}],51:[function(require,module,exports){
"use strict";function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function b(a){return"function"==typeof a}function c(a){return"number"==typeof a}function d(a){return"object"===("undefined"==typeof a?"undefined":f(a))&&null!==a}function e(a){return void 0===a}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};module.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(a){if(!c(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},a.prototype.emit=function(a){var c,f,g,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||d(this._events.error)&&!this._events.error.length)){if(c=arguments[1],c instanceof Error)throw c;var k=new Error('Uncaught, unspecified "error" event. ('+c+")");throw k.context=c,k}if(f=this._events[a],e(f))return!1;if(b(f))switch(arguments.length){case 1:f.call(this);break;case 2:f.call(this,arguments[1]);break;case 3:f.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),f.apply(this,h)}else if(d(f))for(h=Array.prototype.slice.call(arguments,1),j=f.slice(),g=j.length,i=0;i<g;i++)j[i].apply(this,h);return!0},a.prototype.addListener=function(c,f){var g;if(!b(f))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",c,b(f.listener)?f.listener:f),this._events[c]?d(this._events[c])?this._events[c].push(f):this._events[c]=[this._events[c],f]:this._events[c]=f,d(this._events[c])&&!this._events[c].warned&&(g=e(this._maxListeners)?a.defaultMaxListeners:this._maxListeners,g&&g>0&&this._events[c].length>g&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),"function"==typeof console.trace&&console.trace())),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(a,c){function d(){this.removeListener(a,d),e||(e=!0,c.apply(this,arguments))}if(!b(c))throw TypeError("listener must be a function");var e=!1;return d.listener=c,this.on(a,d),this},a.prototype.removeListener=function(a,c){var e,f,g,h;if(!b(c))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(e=this._events[a],g=e.length,f=-1,e===c||b(e.listener)&&e.listener===c)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,c);else if(d(e)){for(h=g;h-- >0;)if(e[h]===c||e[h].listener&&e[h].listener===c){f=h;break}if(f<0)return this;1===e.length?(e.length=0,delete this._events[a]):e.splice(f,1),this._events.removeListener&&this.emit("removeListener",a,c)}return this},a.prototype.removeAllListeners=function(a){var c,d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(c in this._events)"removeListener"!==c&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events={},this}if(d=this._events[a],b(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,d[d.length-1]);return delete this._events[a],this},a.prototype.listeners=function(a){var c;return c=this._events&&this._events[a]?b(this._events[a])?[this._events[a]]:this._events[a].slice():[]},a.prototype.listenerCount=function(a){if(this._events){var c=this._events[a];if(b(c))return 1;if(c)return c.length}return 0},a.listenerCount=function(a,b){return a.listenerCount(b)};
},{}],52:[function(require,module,exports){
"use strict";function a(a){return a&&a.__esModule?a:{default:a}}function b(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function c(){var a=new e.HandlebarsEnvironment;return k.extend(a,e),a.SafeString=g.default,a.Exception=i.default,a.Utils=k,a.escapeExpression=k.escapeExpression,a.VM=m,a.template=function(b){return m.template(b,a)},a}exports.__esModule=!0;var d=require("./handlebars/base"),e=b(d),f=require("./handlebars/safe-string"),g=a(f),h=require("./handlebars/exception"),i=a(h),j=require("./handlebars/utils"),k=b(j),l=require("./handlebars/runtime"),m=b(l),n=require("./handlebars/no-conflict"),o=a(n),p=c();p.create=c,o.default(p),p.default=p,exports.default=p,module.exports=exports.default;
},{"./handlebars/base":53,"./handlebars/exception":56,"./handlebars/no-conflict":66,"./handlebars/runtime":67,"./handlebars/safe-string":68,"./handlebars/utils":69}],53:[function(require,module,exports){
"use strict";function a(a){return a&&a.__esModule?a:{default:a}}function b(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},f.registerDefaultHelpers(this),g.registerDefaultDecorators(this)}exports.__esModule=!0,exports.HandlebarsEnvironment=b;var c=require("./utils"),d=require("./exception"),e=a(d),f=require("./helpers"),g=require("./decorators"),h=require("./logger"),i=a(h),j="4.0.5";exports.VERSION=j;var k=7;exports.COMPILER_REVISION=k;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};exports.REVISION_CHANGES=l;var m="[object Object]";b.prototype={constructor:b,logger:i.default,log:i.default.log,registerHelper:function(a,b){if(c.toString.call(a)===m){if(b)throw new e.default("Arg not supported with multiple helpers");c.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(c.toString.call(a)===m)c.extend(this.partials,a);else{if("undefined"==typeof b)throw new e.default('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(c.toString.call(a)===m){if(b)throw new e.default("Arg not supported with multiple decorators");c.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var n=i.default.log;exports.log=n,exports.createFrame=c.createFrame,exports.logger=i.default;
},{"./decorators":54,"./exception":56,"./helpers":57,"./logger":65,"./utils":69}],54:[function(require,module,exports){
"use strict";function a(a){return a&&a.__esModule?a:{default:a}}function b(a){d.default(a)}exports.__esModule=!0,exports.registerDefaultDecorators=b;var c=require("./decorators/inline"),d=a(c);
},{"./decorators/inline":55}],55:[function(require,module,exports){
"use strict";exports.__esModule=!0;var a=require("../utils");exports.default=function(b){b.registerDecorator("inline",function(b,c,d,e){var f=b;return c.partials||(c.partials={},f=function e(f,g){var h=d.partials;d.partials=a.extend({},h,c.partials);var e=b(f,g);return d.partials=h,e}),c.partials[e.args[0]]=e.fn,f})},module.exports=exports.default;
},{"../utils":69}],56:[function(require,module,exports){
"use strict";function a(c,d){var e=d&&d.loc,f=void 0,g=void 0;e&&(f=e.start.line,g=e.start.column,c+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,c),i=0;i<b.length;i++)this[b[i]]=h[b[i]];Error.captureStackTrace&&Error.captureStackTrace(this,a),e&&(this.lineNumber=f,this.column=g)}exports.__esModule=!0;var b=["description","fileName","lineNumber","message","name","number","stack"];a.prototype=new Error,exports.default=a,module.exports=exports.default;
},{}],57:[function(require,module,exports){
"use strict";function a(a){return a&&a.__esModule?a:{default:a}}function b(a){d.default(a),f.default(a),h.default(a),j.default(a),l.default(a),n.default(a),p.default(a)}exports.__esModule=!0,exports.registerDefaultHelpers=b;var c=require("./helpers/block-helper-missing"),d=a(c),e=require("./helpers/each"),f=a(e),g=require("./helpers/helper-missing"),h=a(g),i=require("./helpers/if"),j=a(i),k=require("./helpers/log"),l=a(k),m=require("./helpers/lookup"),n=a(m),o=require("./helpers/with"),p=a(o);
},{"./helpers/block-helper-missing":58,"./helpers/each":59,"./helpers/helper-missing":60,"./helpers/if":61,"./helpers/log":62,"./helpers/lookup":63,"./helpers/with":64}],58:[function(require,module,exports){
"use strict";exports.__esModule=!0;var a=require("../utils");exports.default=function(b){b.registerHelper("blockHelperMissing",function(c,d){var e=d.inverse,f=d.fn;if(c===!0)return f(this);if(c===!1||null==c)return e(this);if(a.isArray(c))return c.length>0?(d.ids&&(d.ids=[d.name]),b.helpers.each(c,d)):e(this);if(d.data&&d.ids){var g=a.createFrame(d.data);g.contextPath=a.appendContextPath(d.data.contextPath,d.name),d={data:g}}return f(c,d)})},module.exports=exports.default;
},{"../utils":69}],59:[function(require,module,exports){
"use strict";function a(a){return a&&a.__esModule?a:{default:a}}var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};exports.__esModule=!0;var c=require("../utils"),d=require("../exception"),e=a(d);exports.default=function(a){a.registerHelper("each",function(a,d){function f(b,d,e){k&&(k.key=b,k.index=d,k.first=0===d,k.last=!!e,l&&(k.contextPath=l+b)),j+=g(a[b],{data:k,blockParams:c.blockParams([a[b],b],[l+b,null])})}if(!d)throw new e.default("Must pass iterator to #each");var g=d.fn,h=d.inverse,i=0,j="",k=void 0,l=void 0;if(d.data&&d.ids&&(l=c.appendContextPath(d.data.contextPath,d.ids[0])+"."),c.isFunction(a)&&(a=a.call(this)),d.data&&(k=c.createFrame(d.data)),a&&"object"===("undefined"==typeof a?"undefined":b(a)))if(c.isArray(a))for(var m=a.length;i<m;i++)i in a&&f(i,i,i===a.length-1);else{var n=void 0;for(var o in a)a.hasOwnProperty(o)&&(void 0!==n&&f(n,i-1),n=o,i++);void 0!==n&&f(n,i-1,!0)}return 0===i&&(j=h(this)),j})},module.exports=exports.default;
},{"../exception":56,"../utils":69}],60:[function(require,module,exports){
"use strict";function a(a){return a&&a.__esModule?a:{default:a}}exports.__esModule=!0;var b=require("../exception"),c=a(b);exports.default=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new c.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},module.exports=exports.default;
},{"../exception":56}],61:[function(require,module,exports){
"use strict";exports.__esModule=!0;var a=require("../utils");exports.default=function(b){b.registerHelper("if",function(b,c){return a.isFunction(b)&&(b=b.call(this)),!c.hash.includeZero&&!b||a.isEmpty(b)?c.inverse(this):c.fn(this)}),b.registerHelper("unless",function(a,c){return b.helpers.if.call(this,a,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},module.exports=exports.default;
},{"../utils":69}],62:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},module.exports=exports.default;
},{}],63:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},module.exports=exports.default;
},{}],64:[function(require,module,exports){
"use strict";exports.__esModule=!0;var a=require("../utils");exports.default=function(b){b.registerHelper("with",function(b,c){a.isFunction(b)&&(b=b.call(this));var d=c.fn;if(a.isEmpty(b))return c.inverse(this);var e=c.data;return c.data&&c.ids&&(e=a.createFrame(c.data),e.contextPath=a.appendContextPath(c.data.contextPath,c.ids[0])),d(b,{data:e,blockParams:a.blockParams([b],[e&&e.contextPath])})})},module.exports=exports.default;
},{"../utils":69}],65:[function(require,module,exports){
"use strict";exports.__esModule=!0;var a=require("./utils"),b={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(c){if("string"==typeof c){var d=a.indexOf(b.methodMap,c.toLowerCase());c=d>=0?d:parseInt(c,10)}return c},log:function(a){if(a=b.lookupLevel(a),"undefined"!=typeof console&&b.lookupLevel(b.level)<=a){var c=b.methodMap[a];console[c]||(c="log");for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];console[c].apply(console,e)}}};exports.default=b,module.exports=exports.default;
},{"./utils":69}],66:[function(require,module,exports){
(function (global){
"use strict";exports.__esModule=!0,exports.default=function(a){var b="undefined"!=typeof global?global:window,c=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=c),a}},module.exports=exports.default;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],67:[function(require,module,exports){
"use strict";function a(a){return a&&a.__esModule?a:{default:a}}function b(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function c(a){var b=a&&a[0]||1,c=p.COMPILER_REVISION;if(b!==c){if(b<c){var d=p.REVISION_CHANGES[c],e=p.REVISION_CHANGES[b];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function d(a,b){function c(c,d,e){e.hash&&(d=m.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;h<i&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new o.default("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(f,b,f.helpers,f.partials,g,k,h)}var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=e.data;d._setup(e),!e.partial&&a.useData&&(g=i(b,g));var h=void 0,k=a.useBlockParams?[]:void 0;return a.useDepths&&(h=e.depths?b!==e.depths[0]?[b].concat(e.depths):e.depths:[b]),(c=j(a.main,c,f,e.depths||[],g,k))(b,e)}if(!b)throw new o.default("No environment passed to template");if(!a||!a.main)throw new o.default("Unknown template object: "+("undefined"==typeof a?"undefined":k(a)));a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var f={strict:function(a,b){if(!(b in a))throw new o.default('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:m.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,f){var g=this.programs[a],h=this.fn(a);return b||f||d||c?g=e(this,a,h,b,c,d,f):g||(g=this.programs[a]=e(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=m.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(f.helpers=c.helpers,f.partials=c.partials,f.decorators=c.decorators):(f.helpers=f.merge(c.helpers,b.helpers),a.usePartial&&(f.partials=f.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(f.decorators=f.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new o.default("must pass block params");if(a.useDepths&&!g)throw new o.default("must pass parent depths");return e(f,b,a[b],c,0,d,g)},d}function e(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return g&&b!==g[0]&&(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=j(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function f(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function g(a,b,c){c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var d=void 0;if(c.fn&&c.fn!==h&&(c.data=p.createFrame(c.data),d=c.data["partial-block"]=c.fn,d.partials&&(c.partials=m.extend({},c.partials,d.partials))),void 0===a&&d&&(a=d),void 0===a)throw new o.default("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)}function h(){return""}function i(a,b){return b&&"root"in b||(b=b?p.createFrame(b):{},b.root=a),b}function j(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),m.extend(b,g)}return b}var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};exports.__esModule=!0,exports.checkRevision=c,exports.template=d,exports.wrapProgram=e,exports.resolvePartial=f,exports.invokePartial=g,exports.noop=h;var l=require("./utils"),m=b(l),n=require("./exception"),o=a(n),p=require("./base");
},{"./base":53,"./exception":56,"./utils":69}],68:[function(require,module,exports){
"use strict";function a(a){this.string=a}exports.__esModule=!0,a.prototype.toString=a.prototype.toHTML=function(){return""+this.string},exports.default=a,module.exports=exports.default;
},{}],69:[function(require,module,exports){
"use strict";function a(a){return j[a]}function b(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function c(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function d(b){if("string"!=typeof b){if(b&&b.toHTML)return b.toHTML();if(null==b)return"";if(!b)return b+"";b=""+b}return l.test(b)?b.replace(k,a):b}function e(a){return!a&&0!==a||!(!o(a)||0!==a.length)}function f(a){var c=b({},a);return c._parent=a,c}function g(a,b){return a.path=b,a}function h(a,b){return(a?a+".":"")+b}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};exports.__esModule=!0,exports.extend=b,exports.indexOf=c,exports.escapeExpression=d,exports.isEmpty=e,exports.createFrame=f,exports.blockParams=g,exports.appendContextPath=h;var j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},k=/[&<>"'`=]/g,l=/[&<>"'`=]/,m=Object.prototype.toString;exports.toString=m;var n=function(a){return"function"==typeof a};n(/x/)&&(exports.isFunction=n=function(a){return"function"==typeof a&&"[object Function]"===m.call(a)}),exports.isFunction=n;var o=Array.isArray||function(a){return!(!a||"object"!==("undefined"==typeof a?"undefined":i(a)))&&"[object Array]"===m.call(a)};exports.isArray=o;
},{}],70:[function(require,module,exports){
"use strict";module.exports=require("./dist/cjs/handlebars.runtime").default;
},{"./dist/cjs/handlebars.runtime":52}],71:[function(require,module,exports){
"use strict";function a(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function b(a){!i&&document.createRange&&(i=document.createRange(),i.selectNode(document.body));var b;return i&&i.createContextualFragment?b=i.createContextualFragment(a):(b=document.createElement("body"),b.innerHTML=a),b.childNodes[0]}function c(){}function d(a,b){return b&&b!==k?document.createElementNS(b,a):document.createElement(a)}function e(a,b){var c,d,e,f,g,h,i=b.attributes;for(c=i.length-1;c>=0;c--)d=i[c],e=d.name,g=d.value,f=d.namespaceURI,f?(e=d.localName||e,h=a.getAttributeNS(f,e)):h=a.getAttribute(e),h!==g&&(f?a.setAttributeNS(f,e,g):a.setAttribute(e,g));for(i=a.attributes,c=i.length-1;c>=0;c--)d=i[c],d.specified!==!1&&(e=d.name,f=d.namespaceURI,o(b,f,f?e=d.localName||e:e)||(f?a.removeAttributeNS(f,d.localName):a.removeAttribute(e)))}function f(a,b){for(var c=a.firstChild;c;){var d=c.nextSibling;b.appendChild(c),c=d}return b}function g(a){return a.id}function h(h,i,j){function k(a,b){var c=w(a);if(c?u[c]=a:b||C(a),a.nodeType===l)for(var d=a.firstChild;d;)k(d,b||c),d=d.nextSibling}function o(a){if(a.nodeType===l)for(var b=a.firstChild;b;)w(b)||(C(b),o(b)),b=b.nextSibling}function r(a,b,c){B(a)!==!1&&(b.removeChild(a),c?w(a)||(C(a),o(a)):k(a))}function s(a,b,c,d){var f=w(b);if(f&&delete u[f],!d){if(z(a,b)===!1)return;if(e(a,b),A(a),D(a,b)===!1)return}if("TEXTAREA"!==a.nodeName){var g,h,i,j,k,o=b.firstChild,t=a.firstChild;a:for(;o;){for(i=o.nextSibling,g=w(o);t;){var B=w(t);if(h=t.nextSibling,!c&&B&&(k=v[B]))k.parentNode.replaceChild(t,k),s(t,k,c),t=h;else{var E=t.nodeType;if(E===o.nodeType){var G=!1;if(E===l?(q(t,o)&&(B||g?g===B&&(G=!0):G=!0),G&&s(t,o,c)):E!==m&&E!=n||(G=!0,t.nodeValue=o.nodeValue),G){o=i,t=h;continue a}}r(t,a,c),t=h}}g&&((j=u[g])?q(j,o)?(s(j,o,!0),o=j):(delete u[g],C(j)):v[g]=o),x(o)!==!1&&(a.appendChild(o),y(o)),o.nodeType===l&&(g||o.firstChild)&&F.push(o),o=i,t=h}for(;t;)h=t.nextSibling,r(t,a,c),t=h}var H=p[a.nodeName];H&&H(a,b)}if(j||(j={}),"string"==typeof i)if("#document"===h.nodeName||"HTML"===h.nodeName){var t=i;i=document.createElement("html"),i.innerHTML=t}else i=b(i);var u={},v={},w=j.getNodeKey||g,x=j.onBeforeNodeAdded||c,y=j.onNodeAdded||c,z=j.onBeforeElUpdated||j.onBeforeMorphEl||c,A=j.onElUpdated||c,B=j.onBeforeNodeDiscarded||c,C=j.onNodeDiscarded||c,D=j.onBeforeElChildrenUpdated||j.onBeforeMorphElChildren||c,E=j.childrenOnly===!0,F=[],G=h,H=G.nodeType,I=i.nodeType;if(!E)if(H===l)I===l?q(h,i)||(C(h),G=f(h,d(i.nodeName,i.namespaceURI))):G=i;else if(H===m||H===n){if(I===H)return G.nodeValue=i.nodeValue,G;G=i}if(G===i)C(h);else{s(G,i,!1,E);var J=function b(c){for(var d=c.firstChild;d;){var e=d.nextSibling,f=w(d);if(f){var g=u[f];if(g&&q(d,g)){if(d.parentNode.replaceChild(g,d),s(g,d,!0),d=e,a(u))return!1;continue}}d.nodeType===l&&b(d),d=e}};if(!a(u))a:for(;F.length;){var K=F;F=[];for(var L=0;L<K.length;L++)if(J(K[L])===!1)break a}for(var M in u)if(u.hasOwnProperty(M)){var N=u[M];C(N),o(N)}}return!E&&G!==h&&h.parentNode&&h.parentNode.replaceChild(G,h),G}var i,j="undefined"!=typeof document?document.body||document.createElement("div"):{},k="http://www.w3.org/1999/xhtml",l=1,m=3,n=8,o;o=j.hasAttributeNS?function(a,b,c){return a.hasAttributeNS(b,c)}:j.hasAttribute?function(a,b,c){return a.hasAttribute(c)}:function(a,b,c){return!!a.getAttributeNode(c)};var p={OPTION:function(a,b){a.selected=b.selected,a.selected?a.setAttribute("selected",""):a.removeAttribute("selected","")},INPUT:function(a,b){a.checked=b.checked,a.checked?a.setAttribute("checked",""):a.removeAttribute("checked"),a.value!==b.value&&(a.value=b.value),o(b,null,"value")||a.removeAttribute("value"),a.disabled=b.disabled,a.disabled?a.setAttribute("disabled",""):a.removeAttribute("disabled")},TEXTAREA:function(a,b){var c=b.value;a.value!==c&&(a.value=c),a.firstChild&&(a.firstChild.nodeValue=c)}},q=function(a,b){return a.nodeName===b.nodeName&&a.namespaceURI===b.namespaceURI};module.exports=h;
},{}],72:[function(require,module,exports){
"use strict";var a=["h","min","s","ms","s","ns"],b=["hour","minute","second","millisecond","microsecond","nanosecond"],c=[3600,60,1,1e6,1e3,1];module.exports=function(d,e){var f,g,h,i,j,k,l,m,n,o;if(f=!1,g=!1,e&&(f=e.verbose||!1,g=e.precise||!1),!Array.isArray(d)||2!==d.length)return"";if("number"!=typeof d[0]||"number"!=typeof d[1])return"";for(d[1]<0&&(o=d[0]+d[1]/1e9,d[0]=parseInt(o),d[1]=1e9*parseFloat((o%1).toPrecision(9))),n="",h=0;h<6&&(i=h<3?0:1,j=d[i],3!==h&&0!==h&&(j%=c[h-1]),2===h&&(j+=d[1]/1e9),k=j/c[h],!(k>=1)||(f&&(k=Math.floor(k)),g?m=k.toString():(l=k>=10?0:2,m=k.toFixed(l)),m.indexOf(".")>-1&&"0"===m[m.length-1]&&(m=m.replace(/\.?0+$/,"")),n&&(n+=" "),n+=m,f?(n+=" "+b[h],"1"!==m&&(n+="s")):n+=" "+a[h],f));h++);return n};
},{}],73:[function(require,module,exports){
"use strict";function a(a){if(h===setTimeout)return setTimeout(a,0);try{return h(a,0)}catch(b){try{return h.call(null,a,0)}catch(b){return h.call(this,a,0)}}}function b(a){if(i===clearTimeout)return clearTimeout(a);try{return i(a)}catch(b){try{return i.call(null,a)}catch(b){return i.call(this,a)}}}function c(){k&&l&&(k=!1,l.length?j=l.concat(j):m=-1,j.length&&d())}function d(){if(!k){var d=a(c);k=!0;for(var e=j.length;e;){for(l=j,j=[];++m<e;)l&&l[m].run();m=-1,e=j.length}l=null,k=!1,b(d)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g=module.exports={},h,i;!function(){try{h=setTimeout}catch(a){h=function(){throw new Error("setTimeout is not defined")}}try{i=clearTimeout}catch(a){i=function(){throw new Error("clearTimeout is not defined")}}}();var j=[],k=!1,l,m=-1;g.nextTick=function(b){var c=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)c[f-1]=arguments[f];j.push(new e(b,c)),1!==j.length||k||a(d)},e.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=f,g.addListener=f,g.once=f,g.off=f,g.removeListener=f,g.removeAllListeners=f,g.emit=f,g.binding=function(a){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(a){throw new Error("process.chdir is not supported")},g.umask=function(){return 0};
},{}],74:[function(require,module,exports){
"use strict";module.exports=require("./lib");
},{"./lib":79}],75:[function(require,module,exports){
"use strict";function a(){}function b(a){try{return a.then}catch(a){return p=a,q}}function c(a,b){try{return a(b)}catch(a){return p=a,q}}function d(a,b,c){try{a(b,c)}catch(a){return p=a,q}}function e(b){if("object"!==n(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof b)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,b!==a&&m(b,this)}function f(b,c,d){return new b.constructor(function(f,h){var i=new e(a);i.then(f,h),g(b,new l(c,d,i))})}function g(a,b){for(;3===a._81;)a=a._65;return e._10&&e._10(a),0===a._81?0===a._45?(a._45=1,void(a._54=b)):1===a._45?(a._45=2,void(a._54=[a._54,b])):void a._54.push(b):void h(a,b)}function h(a,b){o(function(){var d=1===a._81?b.onFulfilled:b.onRejected;if(null===d)return void(1===a._81?i(b.promise,a._65):j(b.promise,a._65));var e=c(d,a._65);e===q?j(b.promise,p):i(b.promise,e)})}function i(a,c){if(c===a)return j(a,new TypeError("A promise cannot be resolved with itself."));if(c&&("object"===("undefined"==typeof c?"undefined":n(c))||"function"==typeof c)){var d=b(c);if(d===q)return j(a,p);if(d===a.then&&c instanceof e)return a._81=3,a._65=c,void k(a);if("function"==typeof d)return void m(d.bind(c),a)}a._81=1,a._65=c,k(a)}function j(a,b){a._81=2,a._65=b,e._97&&e._97(a,b),k(a)}function k(a){if(1===a._45&&(g(a,a._54),a._54=null),2===a._45){for(var b=0;b<a._54.length;b++)g(a,a._54[b]);a._54=null}}function l(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function m(a,b){var c=!1,e=d(a,function(a){c||(c=!0,i(b,a))},function(a){c||(c=!0,j(b,a))});c||e!==q||(c=!0,j(b,p))}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},o=require("asap/raw"),p=null,q={};module.exports=e,e._10=null,e._97=null,e._61=a,e.prototype.then=function(b,c){if(this.constructor!==e)return f(this,b,c);var d=new e(a);return g(this,new l(b,c,d)),d};
},{"asap/raw":9}],76:[function(require,module,exports){
"use strict";var a=require("./core.js");module.exports=a,a.prototype.done=function(a,b){var c=arguments.length?this.then.apply(this,arguments):this;c.then(null,function(a){setTimeout(function(){throw a},0)})};
},{"./core.js":75}],77:[function(require,module,exports){
"use strict";function a(a){var b=new c(c._61);return b._81=1,b._65=a,b}var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},c=require("./core.js");module.exports=c;var d=a(!0),e=a(!1),f=a(null),g=a(void 0),h=a(0),i=a("");c.resolve=function(j){if(j instanceof c)return j;if(null===j)return f;if(void 0===j)return g;if(j===!0)return d;if(j===!1)return e;if(0===j)return h;if(""===j)return i;if("object"===("undefined"==typeof j?"undefined":b(j))||"function"==typeof j)try{var k=j.then;if("function"==typeof k)return new c(k.bind(j))}catch(a){return new c(function(b,c){c(a)})}return a(j)},c.all=function(a){var d=Array.prototype.slice.call(a);return new c(function(a,e){function f(h,i){if(i&&("object"===("undefined"==typeof i?"undefined":b(i))||"function"==typeof i)){if(i instanceof c&&i.then===c.prototype.then){for(;3===i._81;)i=i._65;return 1===i._81?f(h,i._65):(2===i._81&&e(i._65),void i.then(function(a){f(h,a)},e))}var j=i.then;if("function"==typeof j){var k=new c(j.bind(i));return void k.then(function(a){f(h,a)},e)}}d[h]=i,0===--g&&a(d)}if(0===d.length)return a([]);for(var g=d.length,h=0;h<d.length;h++)f(h,d[h])})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,d){a.forEach(function(a){c.resolve(a).then(b,d)})})},c.prototype.catch=function(a){return this.then(null,a)};
},{"./core.js":75}],78:[function(require,module,exports){
"use strict";var a=require("./core.js");module.exports=a,a.prototype.finally=function(b){return this.then(function(c){return a.resolve(b()).then(function(){return c})},function(c){return a.resolve(b()).then(function(){throw c})})};
},{"./core.js":75}],79:[function(require,module,exports){
"use strict";module.exports=require("./core.js"),require("./done.js"),require("./finally.js"),require("./es6-extensions.js"),require("./node-extensions.js"),require("./synchronous.js");
},{"./core.js":75,"./done.js":76,"./es6-extensions.js":77,"./finally.js":78,"./node-extensions.js":80,"./synchronous.js":81}],80:[function(require,module,exports){
"use strict";function a(a,b){for(var d=[],f=0;f<b;f++)d.push("a"+f);var g=["return function ("+d.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(d).concat([e]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],g)(c,a)}function b(a){for(var b=Math.max(a.length-1,3),d=[],f=0;f<b;f++)d.push("a"+f);var g=["return function ("+d.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+b+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+e+";","var res;","switch (argLength) {",d.concat(["extra"]).map(function(a,b){return"case "+b+":res = fn.call("+["self"].concat(d.slice(0,b)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],g)(c,a)}var c=require("./core.js"),d=require("asap");module.exports=c,c.denodeify=function(c,d){return"number"==typeof d&&d!==1/0?a(c,d):b(c)};var e="function (err, res) {if (err) { rj(err); } else { rs(res); }}";c.nodeify=function(a){return function(){var b=Array.prototype.slice.call(arguments),e="function"==typeof b[b.length-1]?b.pop():null,f=this;try{return a.apply(this,arguments).nodeify(e,f)}catch(a){if(null===e||"undefined"==typeof e)return new c(function(b,c){c(a)});d(function(){e.call(f,a)})}}},c.prototype.nodeify=function(a,b){return"function"!=typeof a?this:void this.then(function(c){d(function(){a.call(b,null,c)})},function(c){d(function(){a.call(b,c)})})};
},{"./core.js":75,"asap":8}],81:[function(require,module,exports){
"use strict";var a=require("./core.js");module.exports=a,a.enableSynchronous=function(){a.prototype.isPending=function(){return 0==this.getState()},a.prototype.isFulfilled=function(){return 1==this.getState()},a.prototype.isRejected=function(){return 2==this.getState()},a.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},a.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},a.prototype.getState=function(){return 3===this._81?this._65.getState():this._81===-1||this._81===-2?0:this._81}},a.disableSynchronous=function(){a.prototype.isPending=void 0,a.prototype.isFulfilled=void 0,a.prototype.isRejected=void 0,a.prototype.getValue=void 0,a.prototype.getReason=void 0,a.prototype.getState=void 0};
},{"./core.js":75}],82:[function(require,module,exports){
(function (global){
"use strict";var a;if(global.crypto&&crypto.getRandomValues){var b=new Uint8Array(16);a=function(){return crypto.getRandomValues(b),b}}if(!a){var c=new Array(16);a=function(){for(var a,b=0;b<16;b++)0===(3&b)&&(a=4294967296*Math.random()),c[b]=a>>>((3&b)<<3)&255;return c}}module.exports=a;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],83:[function(require,module,exports){
"use strict";function a(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){e<16&&(b[d+e++]=g[a])});e<16;)b[d+e++]=0;return b}function b(a,b){var c=b||0,d=f;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function c(a,c,d){var e=c&&d||0,f=c||[];a=a||{};var g=void 0!==a.clockseq?a.clockseq:k,h=void 0!==a.msecs?a.msecs:(new Date).getTime(),i=void 0!==a.nsecs?a.nsecs:m+1,n=h-l+(i-m)/1e4;if(n<0&&void 0===a.clockseq&&(g=g+1&16383),(n<0||h>l)&&void 0===a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=h,m=i,k=g,h+=122192928e5;var o=(1e4*(268435455&h)+i)%4294967296;f[e++]=o>>>24&255,f[e++]=o>>>16&255,f[e++]=o>>>8&255,f[e++]=255&o;var p=h/4294967296*1e4&268435455;f[e++]=p>>>8&255,f[e++]=255&p,f[e++]=p>>>24&15|16,f[e++]=p>>>16&255,f[e++]=g>>>8|128,f[e++]=255&g;for(var q=a.node||j,r=0;r<6;r++)f[e+r]=q[r];return c?c:b(f)}function d(a,c,d){var f=c&&d||0;"string"==typeof a&&(c="binary"==a?new Array(16):null,a=null),a=a||{};var g=a.random||(a.rng||e)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,c)for(var h=0;h<16;h++)c[f+h]=g[h];return c||b(g)}for(var e=require("./rng"),f=[],g={},h=0;h<256;h++)f[h]=(h+256).toString(16).substr(1),g[f[h]]=h;var i=e(),j=[1|i[0],i[1],i[2],i[3],i[4],i[5]],k=16383&(i[6]<<8|i[7]),l=0,m=0,n=d;n.v1=c,n.v4=d,n.parse=a,n.unparse=b,module.exports=n;
},{"./rng":82}],84:[function(require,module,exports){
"use strict";module.exports=["/"];
},{}]},{},[2]);
